<p align="center" style="text-decoration:none">
  <img align="center" src="https://cdn.jsdelivr.net/gh/Ljzd-PRO/KToolBox@latest/static/repository-open-graph-2.svg" alt="logo">
</p>

<h1 align="center">
  KToolBox
</h1>

<p align="center">
  KToolBox æ˜¯ä¸€ä¸ªç”¨äºä¸‹è½½
  <a href="https://kemono.su/">Kemono.party / Kemono.su</a>
  ä¸­ä½œå“å†…å®¹çš„å®ç”¨å‘½ä»¤è¡Œå·¥å…·
</p>

<p align="center">
  <a href="https://pypi.org/project/ktoolbox" target="_blank">
    <img src="https://img.shields.io/github/v/release/Ljzd-PRO/KToolBox?logo=python" alt="Version">
  </a>

  <a href="./LICENSE">
    <img src="https://img.shields.io/badge/License-MIT-blue" alt="MIT"/>
  </a>

  <a href="https://github.com/Ljzd-PRO/KToolBox/activity">
    <img src="https://img.shields.io/github/last-commit/Ljzd-PRO/KToolBox/devel" alt="Last Commit"/>
  </a>

  <a href="https://codecov.io/gh/Ljzd-PRO/KToolBox" target="_blank">
      <img src="https://codecov.io/gh/Ljzd-PRO/KToolBox/branch/master/graph/badge.svg?token=5XK9CYQHQN" alt="codecov"/>
  </a>

  <a style="text-decoration:none">
    <img src="https://img.shields.io/badge/Platform-Windows%20|%20Linux%20|%20macOS-blue" alt="Platform Win | Linux | macOS"/>
  </a>
</p>

<p align="center">
    <a href="./README.md">English</a> | <a href="./README_zh-CN.md">ä¸­æ–‡</a>
</p>

<img src="https://cdn.jsdelivr.net/gh/Ljzd-PRO/KToolBox@latest/static/preview-1.png" alt="Preview">

## åŠŸèƒ½

- ä½ å¯ä»¥ä¸‹è½½ Kemono ä¸Šçš„ä½œå“çš„æ‰€æœ‰æ–‡ä»¶
- æˆ–è€…ä¸‹è½½æŸä¸ªä½œè€… / ç”»å¸ˆçš„æ‰€æœ‰ä½œå“
- **åŒæ­¥**å·²ä¸‹è½½å®Œæˆçš„ä½œè€… / ç”»å¸ˆç›®å½•è‡³æœ€æ–°, åªæœ‰è¿‘æœŸæ›´æ–°å’Œæ–°å‘å¸ƒçš„ä½œå“ä¼šè¢«ä¸‹è½½
- æœç´¢ä½œè€…å’Œä½œå“ï¼Œå¹¶å¯¼å‡ºç»“æœ
- å¹¶å‘ä¸‹è½½
- æ”¯æŒå…¨å¹³å°

## å¼€å‘è®¡åˆ’

- [ ] å¢åŠ  Fluent Design é£æ ¼çš„ UI ç•Œé¢
- [ ] å¯¹ Unix å¹³å°å¢åŠ  uvloop æ”¯æŒ

## ä½¿ç”¨æ–¹æ³•

### iOS å¿«æ·æŒ‡ä»¤ï¼ˆå¯é€‰ï¼‰

- ä½ å¯ä»¥ç”¨ iOS ç»ˆç«¯ App [a-Shell](https://github.com/holzschu/a-shell) è¿è¡Œ KToolBox
- è¿™äº›å¿«æ·æŒ‡ä»¤å¯ä»¥åœ¨ a-Shell è‡ªåŠ¨å®‰è£… KToolBox å’Œä¸‹è½½ Kemono ä½œå“
  - ä½ å¯ä»¥é€šè¿‡ç½‘é¡µå…±äº«ç•Œé¢è§¦å‘â€œä¸‹è½½ Kemono ä½œå“â€ï¼Œæˆ–ç›´æ¥åœ¨å¿«æ·æŒ‡ä»¤ App è¿è¡Œ
- è®¿é—®ä¸‹é¢çš„å¿«æ·æŒ‡ä»¤ URL æˆ–å‰å¾€ [`shortcuts/`](./shortcuts) ä¸‹è½½å¿«æ·æŒ‡ä»¤æ–‡ä»¶

#### è‹±æ–‡

- [KToolBox Manager](https://www.icloud.com/shortcuts/ed981823ea424ebfaefe90e07c146c9f)
- [Download Kemono Post](https://www.icloud.com/shortcuts/dbfef8dfb3774b92b4a8f10d5e3c963c)

#### ä¸­æ–‡

- [KToolBox ç®¡ç†å™¨](https://www.icloud.com/shortcuts/5ebf774fa3eb4c3e98c8db46485314ec)
- [ä¸‹è½½ Kemono ä½œå“](https://www.icloud.com/shortcuts/8d081bc5d66448b7bde19504df885ccd)

### å‘½ä»¤

æ›´å¤šä¿¡æ¯è¯·å‚è€ƒå¸®åŠ©å‘½ä»¤

> **Warning**
> æ­¤å¤„å‘½ä»¤è¿”å›çš„æ–‡æœ¬ä»…ä½œä¸º**æ¼”ç¤º**ä½¿ç”¨ï¼Œéƒ¨åˆ†å¯èƒ½å·²ç»**è¿‡æ—¶**ã€‚

- å®‰è£… KToolBoxï¼š
    ```bash
    pip3 install ktoolbox
    ```
  - å¯¹äº [a-Shell](https://github.com/holzschu/a-shell):
      ```bash
      pip3 install ktoolbox-pure-py
      ```

- è·å–å¸®åŠ©æ€»è§ˆ:
    ```bash
    ktoolbox -h
    ```
    <details>
    <summary>è¿”å›æ–‡æœ¬</summary>
      <pre>
        <code>
  INFO: Showing help with the command '__main__.py -- --help'.
  <br>
  NAME
      __main__.py
  <br>
  SYNOPSIS
      __main__.py COMMAND | -
  <br>
  COMMANDS
      COMMAND is one of the following:
  <br>
     download_post
       Download a specific post
  <br>
     ...
  <br>
     sync_creator
       Sync all posts from a creator
  <br>
     version
       Show KToolBox version
        </code>
      </pre>
    </details>

  > å‰å¾€ [`ktoolbox/cli.py`](ktoolbox/cli.py) ä¸­çš„ `KToolBoxCli` æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚

- è·å–æŸä¸ªå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯:
    ```bash
    ktoolbox download-post -h
    ```
    <details>
    <summary>è¿”å›æ–‡æœ¬</summary>
      <pre>
        <code>
  NAME
      __main__.py sync-creator - Sync all posts from a creator
  <br>
  SYNOPSIS
      __main__.py sync-creator &lt;flags>
  <br>
  DESCRIPTION
      You can update the directory anytime after download finished, such as to update after creator published new posts.
      * If `update_from` was provided, it should be located **inside the creator directory**.
  <br>
  FLAGS
      -u, --url=URL
          Type: Optional[str]
          Default: None
          The post URL
      ...
        </code>
      </pre>
    </details>
  

- ä¸‹è½½æŒ‡å®šçš„ä½œå“:
    ```bash
    ktoolbox download-post https://kemono.su/fanbox/user/49494721/post/6608808
    ```
  
  > å¦‚æœéƒ¨åˆ†æ–‡ä»¶ä¸‹è½½å¤±è´¥ï¼Œä½ å¯ä»¥å°è¯•é‡æ–°è¿è¡Œå‘½ä»¤ï¼Œå·²ä¸‹è½½å®Œæˆçš„æ–‡ä»¶ä¼šè¢«**è·³è¿‡**ã€‚

- ä¸‹è½½ä½œè€…çš„æ‰€æœ‰ä½œå“:
    ```bash
    ktoolbox sync-creator https://kemono.su/fanbox/user/9016
    ```
  
  é»˜è®¤æƒ…å†µä¸‹ä½ ä¼šåœ¨ä½œè€…ç›®å½•ä¸‹å¾—åˆ°ä¸€ä¸ª `creator-indices.ktoolbox` æ–‡ä»¶ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æ›´æ–°ç›®å½•ã€‚

  
- æ›´æ–°ä¸€ä¸ªä½œè€…ç›®å½•:
    ```bash
    ktoolbox sync-creator https://kemono.su/fanbox/user/641955 --update-with=./xxx/creator-indices.ktoolbox
    ```
  
  `creator-indices.ktoolbox` åŒ…å«ç›®å½•ä¸‹çš„æ‰€æœ‰ä½œå“çš„ä¿¡æ¯å’Œè·¯å¾„ã€‚  

### é…ç½®

- KToolBox è¯»å–å·¥ä½œç›®å½•ä¸‹çš„ **`prod.env` æ–‡ä»¶** æˆ– **ç¯å¢ƒå˜é‡** æ¥è®¾å®šé…ç½®
- **æ‰€æœ‰é…ç½®é€‰é¡¹** éƒ½å®šä¹‰åœ¨ [`ktoolbox/configuration.py`](ktoolbox/configuration.py)
- ç”¨ `__` æ¥æŒ‡å®šå­é€‰é¡¹, ä¾‹å¦‚ `KTOOLBOX_API__SCHEME` ç›¸å½“äº `api.scheme`
- æ‰€æœ‰é…ç½®é€‰é¡¹éƒ½æ˜¯å¯é€‰çš„

#### `prod.env` æ–‡ä»¶ç¤ºä¾‹

```dotenv
# å¯åŒæ—¶ä¸‹è½½10ä¸ªæ–‡ä»¶
KTOOLBOX_JOB__COUNT=10

# ä¸ºæ¯ä¸ªä¸‹è½½ä»»åŠ¡åˆ†é… 102400 å­—èŠ‚å†…å­˜ä½œä¸ºç¼“å†²åŒº
KTOOLBOX_DOWNLOADER__BUFFER_SIZE=102400

# è®¾ç½®ä½œå“é™„ä»¶ç›®å½•ä¸º `./`, è¿™æ„å‘³ç€æ‰€æœ‰é™„ä»¶å°†ç›´æ¥ä¿å­˜åœ¨ä½œå“ç›®å½•ä¸‹
# è€Œä¸ä¼šåˆ›å»ºä¸€ä¸ªå­ç›®å½•æ¥å‚¨å­˜
KTOOLBOX_JOB__POST_STRUCTURE__ATTACHMENTS=./

# ä¸ºKemono APIæœåŠ¡å™¨å’Œä¸‹è½½æœåŠ¡å™¨ç¦ç”¨SSLè¯ä¹¦æ£€æŸ¥
# åœ¨KemonoæœåŠ¡å™¨çš„è¯ä¹¦è¿‡æœŸæ—¶å¾ˆæœ‰ç”¨ ï¼ˆSSL: CERTIFICATE_VERIFY_FAILEDï¼‰
KTOOLBOX_SSL_VERIFY=False
```

## å…¶ä»–åˆ†æ”¯

- çº¯ Python åˆ†æ”¯ï¼š[ğŸ”—pure-py](https://github.com/Ljzd-PRO/KToolBox/tree/pure-py)
  - ä½¿ç”¨ pydantic v1 å› æ­¤å®‰è£…æ—¶ä¸éœ€è¦ cargo
  - ä¾‹å¦‚ä½ å¯ä»¥åœ¨ iOS çš„ç»ˆç«¯ App [a-Shell](https://github.com/holzschu/a-shell) è¿è¡Œ
  - PyPIï¼šhttps://pypi.org/project/ktoolbox-pure-py/
- å¼€å‘ç‰ˆåˆ†æ”¯ï¼š[ğŸ”—devel](https://github.com/Ljzd-PRO/KToolBox/tree/devel)

## å…³äº Kemono

å®˜ç½‘ https://kemono.su çš„ä»‹ç»:

> Kemono is a public archiver for:
>  
> - Patreon
> - Pixiv Fanbox
> - Discord
> - Fantia
> - Afdian
> - Boosty
> - DLsite
> - Gumroad
> - SubscribeStar
> 
> Contributors here upload content and share it here for easy searching and organization. \
> To get started viewing content, either search for creators on the artists page, or search for content on the posts page.

## ä»£ç è¦†ç›–ç‡

![codecov.io](https://codecov.io/gh/Ljzd-PRO/KToolBox/graphs/sunburst.svg?token=5XK9CYQHQN)

## è®¸å¯è¯

KToolBox ä½¿ç”¨ MIT è®¸å¯è¯.

Copyright Â© 2023 by Ljzd-PRO.
