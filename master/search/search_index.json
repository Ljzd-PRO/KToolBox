{"config":{"lang":["en","zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to KToolBox","text":"KToolBox  <p>   KToolBox is a useful CLI tool for downloading posts content in   Kemono.party / Kemono.su </p> <p> </p>"},{"location":"#features","title":"Features","text":"<ul> <li>Supports concurrent downloads  </li> <li>Automatically retries API calls and downloads after failures  </li> <li>Allows downloading individual posts or all posts of a specified artist  </li> <li>Can update downloaded artist directories to the latest state  </li> <li>Supports customizable file and directory naming formats and directory structures for downloaded posts/artists  </li> <li>Enables excluding specified file formats or downloading only specified formats  </li> <li>Allows searching for artists and posts, with options to export results  </li> <li>Compatible with all platforms, with iOS shortcuts provided  </li> <li>For support related to Coomer.su / Coomer.party, please refer to the documentation: Coomer</li> </ul>"},{"location":"#tutorial","title":"Tutorial","text":""},{"location":"#installation","title":"Installation","text":"<p>You can use executables from releases page</p> NormalPure PythonFor iOS a-Shell <p>Recommend to use pipx <pre><code>pip3 install pipx\n# Windows\npipx install ktoolbox[urwid,winloop]\n# Linux / macOS\npipx install ktoolbox[urwid,uvloop]\n</code></pre></p> <p>If you are using pyodide, or you can only use pure Python and you cannot compile pydantic v2.x.x <pre><code>pip3 install pipx\npipx install ktoolbox-pure-py\n</code></pre></p> <pre><code>pip3 install ktoolbox-pure-py\n</code></pre> <p>About a-Shell</p> <p>a-Shell is an iOS terminal App,  it can only run pure python scripts.</p>"},{"location":"#command","title":"Command","text":"<p>For more information, use the help command or goto Commands page.</p>"},{"location":"#get-general-help","title":"\u2753 Get general help","text":"<pre><code>ktoolbox -h\n</code></pre>"},{"location":"#get-help-of-a-command","title":"\u2753 Get help of a command","text":"<pre><code>ktoolbox download-post -h\n</code></pre>"},{"location":"#download-a-specific-post","title":"\u2b07\ufe0f\ud83d\uddbc\ufe0f Download a specific post","text":"<pre><code>ktoolbox download-post https://kemono.su/fanbox/user/49494721/post/6608808\n</code></pre> If some files failed to download <p>If some files failed to download, you can try to execute the command line again,  the downloaded files will be skipped.</p>"},{"location":"#download-posts-from-a-creator","title":"\u2b07\ufe0f\ud83d\udd8c\ufe0f Download posts from a creator","text":"<pre><code># Download all posts of the creator/artist\nktoolbox sync-creator https://kemono.su/fanbox/user/9016\n\n# Download latest 10 posts of the creator/artist\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --length=10\n\n# Download latest No.11-No.15 posts of the creator/artist\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --offset=10 --length=5\n\n# Download posts from the creator/artist from 2024-1-1 to 2024-3-1\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --start-time=2024-1-1 --end-time=2024-3-1\n</code></pre>"},{"location":"#configuration","title":"Configuration","text":"<ul> <li>Download 10 files at the same time</li> <li>Rename attachments in numerical order</li> <li>Prefix the post directory name with its release/publish date</li> <li>...</li> </ul> <p>Goto Configuration-Guide page for more details.</p>"},{"location":"about-kemono/","title":"About Kemono","text":"<p>Description from https://kemono.cr :</p> <p>Kemono is a public archiver for:</p> <ul> <li>Patreon</li> <li>Pixiv Fanbox</li> <li>Discord</li> <li>Fantia</li> <li>Afdian</li> <li>Boosty</li> <li>DLsite</li> <li>Gumroad</li> <li>SubscribeStar</li> </ul> <p>Contributors here upload content and share it here for easy searching and organization. \\ To get started viewing content, either search for creators on the artists page, or search for content on the posts page.</p>"},{"location":"api/","title":"API Documentation","text":""},{"location":"api/#ktoolbox.__description__","title":"<code>__description__ = 'A useful CLI tool for downloading posts in Kemono.cr / .su / .party'</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.__title__","title":"<code>__title__ = 'KToolBox'</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.__version__","title":"<code>__version__ = 'v0.18.0'</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.__main__","title":"<code>__main__</code>","text":""},{"location":"api/#ktoolbox.__main__.main","title":"<code>main()</code>","text":""},{"location":"api/#ktoolbox.action","title":"<code>action</code>","text":""},{"location":"api/#ktoolbox.action.ActionRet","title":"<code>ActionRet</code>","text":"<p>               Bases: <code>BaseRet[_T]</code></p> <p>Return data model of action call</p>"},{"location":"api/#ktoolbox.action.FetchInterruptError","title":"<code>FetchInterruptError</code>","text":"<p>               Bases: <code>Exception</code></p> <p>Exception for interrupt of data fetching</p>"},{"location":"api/#ktoolbox.action.FetchInterruptError.ret","title":"<code>ret = ret</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.action.FetchInterruptError.__init__","title":"<code>__init__(*args, ret=None)</code>","text":""},{"location":"api/#ktoolbox.action.create_job_from_creator","title":"<code>create_job_from_creator(service, creator_id, path, *, all_pages=False, offset=0, length=50, save_creator_indices=False, mix_posts=None, start_time, end_time, keywords=None)</code>  <code>async</code>","text":"<p>Create a list of download job from a creator</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service where the post is located</p> required <code>creator_id</code> <code>str</code> <p>The ID of the creator</p> required <code>path</code> <code>Path</code> <p>The path for downloading posts, which needs to be sanitized</p> required <code>all_pages</code> <code>bool</code> <p>Fetch all posts, <code>offset</code> and <code>length</code> will be ignored if enabled</p> <code>False</code> <code>offset</code> <code>int</code> <p>Result offset (or start offset)</p> <code>0</code> <code>length</code> <code>Optional[int]</code> <p>The number of posts to fetch</p> <code>50</code> <code>save_creator_indices</code> <code>bool</code> <p>Record <code>CreatorIndices</code> data.</p> <code>False</code> <code>mix_posts</code> <code>bool</code> <p>Save all files from different posts at same path,      <code>save_creator_indices</code> will be ignored if enabled</p> <code>None</code> <code>start_time</code> <code>Optional[datetime]</code> <p>Start time of the time range</p> required <code>end_time</code> <code>Optional[datetime]</code> <p>End time of the time range</p> required <code>keywords</code> <code>Optional[Set[str]]</code> <p>Set of keywords to filter posts by title (case-insensitive)</p> <code>None</code>"},{"location":"api/#ktoolbox.action.create_job_from_post","title":"<code>create_job_from_post(post, post_path, *, post_structure=None, dump_post_data=True)</code>  <code>async</code>","text":"<p>Create a list of download job from a post data</p> <p>Parameters:</p> Name Type Description Default <code>post</code> <code>Post</code> <p>post data</p> required <code>post_path</code> <code>Path</code> <p>Path of the post directory, which needs to be sanitized</p> required <code>post_structure</code> <code>Union[PostStructureConfiguration, bool]</code> <p>post path structure, <code>False</code> -&gt; disable,      <code>True</code> &amp; <code>None</code> -&gt; <code>config.job.post_structure</code></p> <code>None</code> <code>dump_post_data</code> <code>bool</code> <p>Whether to dump post data (post.json) in post directory</p> <code>True</code>"},{"location":"api/#ktoolbox.action.fetch_creator_posts","title":"<code>fetch_creator_posts(service, creator_id, o=0)</code>  <code>async</code>","text":"<p>Fetch posts from a creator</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service where the post is located</p> required <code>creator_id</code> <code>str</code> <p>The ID of the creator</p> required <code>o</code> <code>int</code> <p>Result offset, stepping of 50 is enforced</p> <code>0</code> <p>Returns:</p> Type Description <code>AsyncGenerator[List[Post], Any]</code> <p>Async generator of several list of posts</p> <p>Raises:</p> Type Description <code>FetchInterruptError</code> <p>Exception for interrupt of data fetching</p>"},{"location":"api/#ktoolbox.action.filter_posts_by_date","title":"<code>filter_posts_by_date(post_list, start_date, end_date)</code>","text":"<p>Filter posts by publish date range</p> <p>Parameters:</p> Name Type Description Default <code>post_list</code> <code>List[Post]</code> <p>List of posts</p> required <code>start_date</code> <code>Optional[datetime]</code> <p>Start time of the time range</p> required <code>end_date</code> <code>Optional[datetime]</code> <p>End time of the time range</p> required"},{"location":"api/#ktoolbox.action.filter_posts_by_indices","title":"<code>filter_posts_by_indices(posts, indices)</code>","text":"<p>Compare and filter posts by <code>CreatorIndices</code> data</p> <p>Only keep posts that was edited after last download.</p> <p>Parameters:</p> Name Type Description Default <code>posts</code> <code>List[Post]</code> <p>Posts to filter</p> required <code>indices</code> <code>CreatorIndices</code> <p><code>CreatorIndices</code> data to use</p> required <p>Returns:</p> Type Description <code>Tuple[List[Post], CreatorIndices]</code> <p>A updated <code>List[Post]</code> and updated new <code>CreatorIndices</code> instance</p>"},{"location":"api/#ktoolbox.action.filter_posts_by_keywords","title":"<code>filter_posts_by_keywords(post_list, keywords)</code>","text":"<p>Filter posts by keywords in title</p> <p>Parameters:</p> Name Type Description Default <code>post_list</code> <code>List[Post]</code> <p>List of posts</p> required <code>keywords</code> <code>Optional[Set[str]]</code> <p>Set of keywords to search for (case-insensitive), None means no filtering</p> required"},{"location":"api/#ktoolbox.action.generate_filename","title":"<code>generate_filename(post, basic_name, filename_format)</code>","text":"<p>Generate download filename</p>"},{"location":"api/#ktoolbox.action.generate_post_path_name","title":"<code>generate_post_path_name(post)</code>","text":"<p>Generate directory name for post to save.</p>"},{"location":"api/#ktoolbox.action.match_post_keywords","title":"<code>match_post_keywords(post, keywords)</code>","text":"<p>Check if the post contains any of the specified keywords.</p> <p>Parameters:</p> Name Type Description Default <code>post</code> <code>Post</code> <p>Target post object</p> required <code>keywords</code> <code>Set[str]</code> <p>Set of keywords to search for (case-insensitive)</p> required <p>Returns:</p> Type Description <code>bool</code> <p>Whether the post contains any of the keywords in title</p>"},{"location":"api/#ktoolbox.action.search_creator","title":"<code>search_creator(id=None, name=None, service=None)</code>  <code>async</code>","text":"<p>Search creator with multiple keywords support.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code>"},{"location":"api/#ktoolbox.action.search_creator_post","title":"<code>search_creator_post(id=None, name=None, service=None, q=None, o=None)</code>  <code>async</code>","text":"<p>Search posts from creator with multiple keywords support.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code> <code>q</code> <code>str</code> <p>Search query</p> <code>None</code> <code>o</code> <code>str</code> <p>Result offset, stepping of 50 is enforced</p> <code>None</code>"},{"location":"api/#ktoolbox.action.base","title":"<code>base</code>","text":""},{"location":"api/#ktoolbox.action.base.__all__","title":"<code>__all__ = ['ActionRet']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.action.base.ActionRet","title":"<code>ActionRet</code>","text":"<p>               Bases: <code>BaseRet[_T]</code></p> <p>Return data model of action call</p>"},{"location":"api/#ktoolbox.action.fetch","title":"<code>fetch</code>","text":""},{"location":"api/#ktoolbox.action.fetch.__all__","title":"<code>__all__ = ['FetchInterruptError', 'fetch_creator_posts']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.action.fetch.FetchInterruptError","title":"<code>FetchInterruptError</code>","text":"<p>               Bases: <code>Exception</code></p> <p>Exception for interrupt of data fetching</p>"},{"location":"api/#ktoolbox.action.fetch.FetchInterruptError.ret","title":"<code>ret = ret</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.action.fetch.FetchInterruptError.__init__","title":"<code>__init__(*args, ret=None)</code>","text":""},{"location":"api/#ktoolbox.action.fetch.fetch_creator_posts","title":"<code>fetch_creator_posts(service, creator_id, o=0)</code>  <code>async</code>","text":"<p>Fetch posts from a creator</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service where the post is located</p> required <code>creator_id</code> <code>str</code> <p>The ID of the creator</p> required <code>o</code> <code>int</code> <p>Result offset, stepping of 50 is enforced</p> <code>0</code> <p>Returns:</p> Type Description <code>AsyncGenerator[List[Post], Any]</code> <p>Async generator of several list of posts</p> <p>Raises:</p> Type Description <code>FetchInterruptError</code> <p>Exception for interrupt of data fetching</p>"},{"location":"api/#ktoolbox.action.job","title":"<code>job</code>","text":""},{"location":"api/#ktoolbox.action.job.__all__","title":"<code>__all__ = ['create_job_from_post', 'create_job_from_creator']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.action.job.create_job_from_creator","title":"<code>create_job_from_creator(service, creator_id, path, *, all_pages=False, offset=0, length=50, save_creator_indices=False, mix_posts=None, start_time, end_time, keywords=None)</code>  <code>async</code>","text":"<p>Create a list of download job from a creator</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service where the post is located</p> required <code>creator_id</code> <code>str</code> <p>The ID of the creator</p> required <code>path</code> <code>Path</code> <p>The path for downloading posts, which needs to be sanitized</p> required <code>all_pages</code> <code>bool</code> <p>Fetch all posts, <code>offset</code> and <code>length</code> will be ignored if enabled</p> <code>False</code> <code>offset</code> <code>int</code> <p>Result offset (or start offset)</p> <code>0</code> <code>length</code> <code>Optional[int]</code> <p>The number of posts to fetch</p> <code>50</code> <code>save_creator_indices</code> <code>bool</code> <p>Record <code>CreatorIndices</code> data.</p> <code>False</code> <code>mix_posts</code> <code>bool</code> <p>Save all files from different posts at same path,      <code>save_creator_indices</code> will be ignored if enabled</p> <code>None</code> <code>start_time</code> <code>Optional[datetime]</code> <p>Start time of the time range</p> required <code>end_time</code> <code>Optional[datetime]</code> <p>End time of the time range</p> required <code>keywords</code> <code>Optional[Set[str]]</code> <p>Set of keywords to filter posts by title (case-insensitive)</p> <code>None</code>"},{"location":"api/#ktoolbox.action.job.create_job_from_post","title":"<code>create_job_from_post(post, post_path, *, post_structure=None, dump_post_data=True)</code>  <code>async</code>","text":"<p>Create a list of download job from a post data</p> <p>Parameters:</p> Name Type Description Default <code>post</code> <code>Post</code> <p>post data</p> required <code>post_path</code> <code>Path</code> <p>Path of the post directory, which needs to be sanitized</p> required <code>post_structure</code> <code>Union[PostStructureConfiguration, bool]</code> <p>post path structure, <code>False</code> -&gt; disable,      <code>True</code> &amp; <code>None</code> -&gt; <code>config.job.post_structure</code></p> <code>None</code> <code>dump_post_data</code> <code>bool</code> <p>Whether to dump post data (post.json) in post directory</p> <code>True</code>"},{"location":"api/#ktoolbox.action.search","title":"<code>search</code>","text":""},{"location":"api/#ktoolbox.action.search.__all__","title":"<code>__all__ = ['search_creator', 'search_creator_post']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.action.search.search_creator","title":"<code>search_creator(id=None, name=None, service=None)</code>  <code>async</code>","text":"<p>Search creator with multiple keywords support.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code>"},{"location":"api/#ktoolbox.action.search.search_creator_post","title":"<code>search_creator_post(id=None, name=None, service=None, q=None, o=None)</code>  <code>async</code>","text":"<p>Search posts from creator with multiple keywords support.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code> <code>q</code> <code>str</code> <p>Search query</p> <code>None</code> <code>o</code> <code>str</code> <p>Result offset, stepping of 50 is enforced</p> <code>None</code>"},{"location":"api/#ktoolbox.action.utils","title":"<code>utils</code>","text":""},{"location":"api/#ktoolbox.action.utils.TIME_FORMAT","title":"<code>TIME_FORMAT = '%Y-%m-%d'</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.action.utils.__all__","title":"<code>__all__ = ['generate_post_path_name', 'generate_filename', 'filter_posts_by_date', 'filter_posts_by_indices', 'match_post_keywords', 'filter_posts_by_keywords']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.action.utils.filter_posts_by_date","title":"<code>filter_posts_by_date(post_list, start_date, end_date)</code>","text":"<p>Filter posts by publish date range</p> <p>Parameters:</p> Name Type Description Default <code>post_list</code> <code>List[Post]</code> <p>List of posts</p> required <code>start_date</code> <code>Optional[datetime]</code> <p>Start time of the time range</p> required <code>end_date</code> <code>Optional[datetime]</code> <p>End time of the time range</p> required"},{"location":"api/#ktoolbox.action.utils.filter_posts_by_indices","title":"<code>filter_posts_by_indices(posts, indices)</code>","text":"<p>Compare and filter posts by <code>CreatorIndices</code> data</p> <p>Only keep posts that was edited after last download.</p> <p>Parameters:</p> Name Type Description Default <code>posts</code> <code>List[Post]</code> <p>Posts to filter</p> required <code>indices</code> <code>CreatorIndices</code> <p><code>CreatorIndices</code> data to use</p> required <p>Returns:</p> Type Description <code>Tuple[List[Post], CreatorIndices]</code> <p>A updated <code>List[Post]</code> and updated new <code>CreatorIndices</code> instance</p>"},{"location":"api/#ktoolbox.action.utils.filter_posts_by_keywords","title":"<code>filter_posts_by_keywords(post_list, keywords)</code>","text":"<p>Filter posts by keywords in title</p> <p>Parameters:</p> Name Type Description Default <code>post_list</code> <code>List[Post]</code> <p>List of posts</p> required <code>keywords</code> <code>Optional[Set[str]]</code> <p>Set of keywords to search for (case-insensitive), None means no filtering</p> required"},{"location":"api/#ktoolbox.action.utils.generate_filename","title":"<code>generate_filename(post, basic_name, filename_format)</code>","text":"<p>Generate download filename</p>"},{"location":"api/#ktoolbox.action.utils.generate_post_path_name","title":"<code>generate_post_path_name(post)</code>","text":"<p>Generate directory name for post to save.</p>"},{"location":"api/#ktoolbox.action.utils.match_post_keywords","title":"<code>match_post_keywords(post, keywords)</code>","text":"<p>Check if the post contains any of the specified keywords.</p> <p>Parameters:</p> Name Type Description Default <code>post</code> <code>Post</code> <p>Target post object</p> required <code>keywords</code> <code>Set[str]</code> <p>Set of keywords to search for (case-insensitive)</p> required <p>Returns:</p> Type Description <code>bool</code> <p>Whether the post contains any of the keywords in title</p>"},{"location":"api/#ktoolbox.api","title":"<code>api</code>","text":"<ul> <li> <p>Kemono API version: <code>1.0.0</code></p> </li> <li> <p>current App commit hash: <code>7ee4a7b18ee92a442c13950c05dc8236cfb14a60</code></p> </li> </ul>"},{"location":"api/#ktoolbox.api.APIRet","title":"<code>APIRet</code>","text":"<p>               Bases: <code>BaseRet[_T]</code></p> <p>Return data model of API call</p>"},{"location":"api/#ktoolbox.api.APITenacityStop","title":"<code>APITenacityStop</code>","text":"<p>               Bases: <code>stop_base</code></p> <p>APIs Stop strategies</p>"},{"location":"api/#ktoolbox.api.APITenacityStop.__call__","title":"<code>__call__(retry_state)</code>","text":""},{"location":"api/#ktoolbox.api.BaseAPI","title":"<code>BaseAPI</code>","text":"<p>               Bases: <code>ABC</code>, <code>Generic[_T]</code></p>"},{"location":"api/#ktoolbox.api.BaseAPI.Response","title":"<code>Response = BaseModel</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>API response model</p>"},{"location":"api/#ktoolbox.api.BaseAPI.client","title":"<code>client = httpx.AsyncClient(verify=config.ssl_verify, cookies={'session': config.api.session_key} if config.api.session_key else None)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.BaseAPI.extra_validator","title":"<code>extra_validator: Optional[Callable[[str], BaseModel]] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.BaseAPI.method","title":"<code>method: Literal['get', 'post']</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.BaseAPI.path","title":"<code>path: str = '/'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.BaseAPI.__call__","title":"<code>__call__(*args, **kwargs)</code>  <code>abstractmethod</code> <code>async</code> <code>classmethod</code>","text":"<p>Function to call API</p>"},{"location":"api/#ktoolbox.api.BaseAPI.handle_res","title":"<code>handle_res(res)</code>  <code>classmethod</code>","text":"<p>Handle API response</p>"},{"location":"api/#ktoolbox.api.BaseAPI.request","title":"<code>request(path=None, **kwargs)</code>  <code>async</code> <code>classmethod</code>","text":"<p>Make a request to the API</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str</code> <p>Fully initialed URL path</p> <code>None</code> <code>kwargs</code> <p>Keyword arguments of <code>httpx._client.AsyncClient.request</code></p> <code>{}</code>"},{"location":"api/#ktoolbox.api.base","title":"<code>base</code>","text":""},{"location":"api/#ktoolbox.api.base.__all__","title":"<code>__all__ = ['APITenacityStop', 'APIRet', 'BaseAPI']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.base.APIRet","title":"<code>APIRet</code>","text":"<p>               Bases: <code>BaseRet[_T]</code></p> <p>Return data model of API call</p>"},{"location":"api/#ktoolbox.api.base.APITenacityStop","title":"<code>APITenacityStop</code>","text":"<p>               Bases: <code>stop_base</code></p> <p>APIs Stop strategies</p>"},{"location":"api/#ktoolbox.api.base.APITenacityStop.__call__","title":"<code>__call__(retry_state)</code>","text":""},{"location":"api/#ktoolbox.api.base.BaseAPI","title":"<code>BaseAPI</code>","text":"<p>               Bases: <code>ABC</code>, <code>Generic[_T]</code></p>"},{"location":"api/#ktoolbox.api.base.BaseAPI.Response","title":"<code>Response = BaseModel</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>API response model</p>"},{"location":"api/#ktoolbox.api.base.BaseAPI.client","title":"<code>client = httpx.AsyncClient(verify=config.ssl_verify, cookies={'session': config.api.session_key} if config.api.session_key else None)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.base.BaseAPI.extra_validator","title":"<code>extra_validator: Optional[Callable[[str], BaseModel]] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.base.BaseAPI.method","title":"<code>method: Literal['get', 'post']</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.base.BaseAPI.path","title":"<code>path: str = '/'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.base.BaseAPI.__call__","title":"<code>__call__(*args, **kwargs)</code>  <code>abstractmethod</code> <code>async</code> <code>classmethod</code>","text":"<p>Function to call API</p>"},{"location":"api/#ktoolbox.api.base.BaseAPI.handle_res","title":"<code>handle_res(res)</code>  <code>classmethod</code>","text":"<p>Handle API response</p>"},{"location":"api/#ktoolbox.api.base.BaseAPI.request","title":"<code>request(path=None, **kwargs)</code>  <code>async</code> <code>classmethod</code>","text":"<p>Make a request to the API</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str</code> <p>Fully initialed URL path</p> <code>None</code> <code>kwargs</code> <p>Keyword arguments of <code>httpx._client.AsyncClient.request</code></p> <code>{}</code>"},{"location":"api/#ktoolbox.api.misc","title":"<code>misc</code>","text":""},{"location":"api/#ktoolbox.api.misc.get_app_version","title":"<code>get_app_version = GetAppVersion.__call__</code>  <code>module-attribute</code>","text":"<p>Show current App commit hash</p>"},{"location":"api/#ktoolbox.api.misc.GetAppVersion","title":"<code>GetAppVersion</code>","text":"<p>               Bases: <code>BaseAPI</code></p>"},{"location":"api/#ktoolbox.api.misc.GetAppVersion.extra_validator","title":"<code>extra_validator = Response.model_validate_strings</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.misc.GetAppVersion.method","title":"<code>method = 'get'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.misc.GetAppVersion.path","title":"<code>path = '/app_version'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.misc.GetAppVersion.Response","title":"<code>Response</code>","text":"<p>               Bases: <code>RootModel[str]</code></p>"},{"location":"api/#ktoolbox.api.misc.GetAppVersion.Response.root","title":"<code>root: str</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.misc.GetAppVersion.__call__","title":"<code>__call__()</code>  <code>async</code> <code>classmethod</code>","text":""},{"location":"api/#ktoolbox.api.model","title":"<code>model</code>","text":""},{"location":"api/#ktoolbox.api.model.Announcement","title":"<code>Announcement</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.Announcement.added","title":"<code>added: Optional[datetime] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>isoformat UTC</p>"},{"location":"api/#ktoolbox.api.model.Announcement.content","title":"<code>content: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Announcement.hash","title":"<code>hash: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>sha256</p>"},{"location":"api/#ktoolbox.api.model.Announcement.service","title":"<code>service: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Announcement.user_id","title":"<code>user_id: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Attachment","title":"<code>Attachment</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.Attachment.name","title":"<code>name: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Attachment.path","title":"<code>path: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Creator","title":"<code>Creator</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.Creator.favorited","title":"<code>favorited: int</code>  <code>instance-attribute</code>","text":"<p>The number of times this creator has been favorited</p>"},{"location":"api/#ktoolbox.api.model.Creator.id","title":"<code>id: str</code>  <code>instance-attribute</code>","text":"<p>The ID of the creator</p>"},{"location":"api/#ktoolbox.api.model.Creator.indexed","title":"<code>indexed: datetime</code>  <code>instance-attribute</code>","text":"<p>Timestamp when the creator was indexed, Unix time as integer</p>"},{"location":"api/#ktoolbox.api.model.Creator.name","title":"<code>name: str</code>  <code>instance-attribute</code>","text":"<p>The name of the creator</p>"},{"location":"api/#ktoolbox.api.model.Creator.service","title":"<code>service: str</code>  <code>instance-attribute</code>","text":"<p>The service for the creator</p>"},{"location":"api/#ktoolbox.api.model.Creator.updated","title":"<code>updated: datetime</code>  <code>instance-attribute</code>","text":"<p>Timestamp when the creator was last updated, Unix time as integer</p>"},{"location":"api/#ktoolbox.api.model.File","title":"<code>File</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.File.name","title":"<code>name: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.File.path","title":"<code>path: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post","title":"<code>Post</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.Post.added","title":"<code>added: Optional[datetime] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.attachments","title":"<code>attachments: Optional[List[Attachment]] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.content","title":"<code>content: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.edited","title":"<code>edited: Optional[datetime] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.embed","title":"<code>embed: Optional[Dict[str, Any]] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.file","title":"<code>file: Optional[File] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.id","title":"<code>id: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.published","title":"<code>published: Optional[datetime] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.service","title":"<code>service: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.shared_file","title":"<code>shared_file: Optional[bool] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.title","title":"<code>title: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Post.user","title":"<code>user: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.Revision","title":"<code>Revision</code>","text":"<p>               Bases: <code>Post</code></p> <p>Revision model that extends Post with revision_id field</p>"},{"location":"api/#ktoolbox.api.model.Revision.revision_id","title":"<code>revision_id: Optional[int] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.announcement","title":"<code>announcement</code>","text":""},{"location":"api/#ktoolbox.api.model.announcement.__all__","title":"<code>__all__ = ['Announcement']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.announcement.Announcement","title":"<code>Announcement</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.announcement.Announcement.added","title":"<code>added: Optional[datetime] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>isoformat UTC</p>"},{"location":"api/#ktoolbox.api.model.announcement.Announcement.content","title":"<code>content: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.announcement.Announcement.hash","title":"<code>hash: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>sha256</p>"},{"location":"api/#ktoolbox.api.model.announcement.Announcement.service","title":"<code>service: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.announcement.Announcement.user_id","title":"<code>user_id: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.creator","title":"<code>creator</code>","text":""},{"location":"api/#ktoolbox.api.model.creator.__all__","title":"<code>__all__ = ['Creator']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.creator.Creator","title":"<code>Creator</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.creator.Creator.favorited","title":"<code>favorited: int</code>  <code>instance-attribute</code>","text":"<p>The number of times this creator has been favorited</p>"},{"location":"api/#ktoolbox.api.model.creator.Creator.id","title":"<code>id: str</code>  <code>instance-attribute</code>","text":"<p>The ID of the creator</p>"},{"location":"api/#ktoolbox.api.model.creator.Creator.indexed","title":"<code>indexed: datetime</code>  <code>instance-attribute</code>","text":"<p>Timestamp when the creator was indexed, Unix time as integer</p>"},{"location":"api/#ktoolbox.api.model.creator.Creator.name","title":"<code>name: str</code>  <code>instance-attribute</code>","text":"<p>The name of the creator</p>"},{"location":"api/#ktoolbox.api.model.creator.Creator.service","title":"<code>service: str</code>  <code>instance-attribute</code>","text":"<p>The service for the creator</p>"},{"location":"api/#ktoolbox.api.model.creator.Creator.updated","title":"<code>updated: datetime</code>  <code>instance-attribute</code>","text":"<p>Timestamp when the creator was last updated, Unix time as integer</p>"},{"location":"api/#ktoolbox.api.model.post","title":"<code>post</code>","text":""},{"location":"api/#ktoolbox.api.model.post.__all__","title":"<code>__all__ = ['File', 'Attachment', 'Post', 'Revision']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Attachment","title":"<code>Attachment</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.post.Attachment.name","title":"<code>name: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Attachment.path","title":"<code>path: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.File","title":"<code>File</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.post.File.name","title":"<code>name: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.File.path","title":"<code>path: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post","title":"<code>Post</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.model.post.Post.added","title":"<code>added: Optional[datetime] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.attachments","title":"<code>attachments: Optional[List[Attachment]] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.content","title":"<code>content: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.edited","title":"<code>edited: Optional[datetime] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.embed","title":"<code>embed: Optional[Dict[str, Any]] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.file","title":"<code>file: Optional[File] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.id","title":"<code>id: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.published","title":"<code>published: Optional[datetime] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.service","title":"<code>service: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.shared_file","title":"<code>shared_file: Optional[bool] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.title","title":"<code>title: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Post.user","title":"<code>user: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.model.post.Revision","title":"<code>Revision</code>","text":"<p>               Bases: <code>Post</code></p> <p>Revision model that extends Post with revision_id field</p>"},{"location":"api/#ktoolbox.api.model.post.Revision.revision_id","title":"<code>revision_id: Optional[int] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts","title":"<code>posts</code>","text":""},{"location":"api/#ktoolbox.api.posts.get_announcement","title":"<code>get_announcement = GetAnnouncement.__call__</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.get_creator_post","title":"<code>get_creator_post = GetCreatorPost.__call__</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.get_creators","title":"<code>get_creators = GetCreators.__call__</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.get_post","title":"<code>get_post = GetPost.__call__</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.get_post_revisions","title":"<code>get_post_revisions = GetPostRevisions.__call__</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetAnnouncement","title":"<code>GetAnnouncement</code>","text":"<p>               Bases: <code>BaseAPI</code></p>"},{"location":"api/#ktoolbox.api.posts.GetAnnouncement.method","title":"<code>method = 'get'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetAnnouncement.path","title":"<code>path = '/{service}/user/{creator_id}/announcements'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetAnnouncement.Response","title":"<code>Response</code>","text":"<p>               Bases: <code>RootModel[List[Announcement]]</code></p>"},{"location":"api/#ktoolbox.api.posts.GetAnnouncement.Response.root","title":"<code>root: List[Announcement]</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetAnnouncement.__call__","title":"<code>__call__(service, creator_id)</code>  <code>async</code> <code>classmethod</code>","text":"<p>Get creator announcements</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service name</p> required <code>creator_id</code> <code>str</code> <p>The creator's ID</p> required"},{"location":"api/#ktoolbox.api.posts.GetCreatorPost","title":"<code>GetCreatorPost</code>","text":"<p>               Bases: <code>BaseAPI</code></p>"},{"location":"api/#ktoolbox.api.posts.GetCreatorPost.method","title":"<code>method = 'get'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetCreatorPost.path","title":"<code>path = '/{service}/user/{creator_id}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetCreatorPost.Response","title":"<code>Response</code>","text":"<p>               Bases: <code>RootModel[List[Post]]</code></p>"},{"location":"api/#ktoolbox.api.posts.GetCreatorPost.Response.root","title":"<code>root: List[Post]</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetCreatorPost.__call__","title":"<code>__call__(service, creator_id, *, q=None, o=None)</code>  <code>async</code> <code>classmethod</code>","text":"<p>Get a list of creator posts</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service where the post is located</p> required <code>creator_id</code> <code>str</code> <p>The ID of the creator</p> required <code>q</code> <code>str</code> <p>Search query</p> <code>None</code> <code>o</code> <code>int</code> <p>Result offset, stepping of 50 is enforced</p> <code>None</code>"},{"location":"api/#ktoolbox.api.posts.GetCreators","title":"<code>GetCreators</code>","text":"<p>               Bases: <code>BaseAPI</code></p> <p>List All Creators</p>"},{"location":"api/#ktoolbox.api.posts.GetCreators.method","title":"<code>method = 'get'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetCreators.path","title":"<code>path = '/creators.txt'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetCreators.Response","title":"<code>Response</code>","text":"<p>               Bases: <code>RootModel[List[Creator]]</code></p>"},{"location":"api/#ktoolbox.api.posts.GetCreators.Response.root","title":"<code>root: List[Creator]</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetCreators.__call__","title":"<code>__call__()</code>  <code>async</code> <code>classmethod</code>","text":"<p>List of all creators</p> <p>List all creators with details. I blame DDG for .txt.</p>"},{"location":"api/#ktoolbox.api.posts.GetPost","title":"<code>GetPost</code>","text":"<p>               Bases: <code>BaseAPI</code></p>"},{"location":"api/#ktoolbox.api.posts.GetPost.method","title":"<code>method = 'get'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetPost.path","title":"<code>path = '/{service}/user/{creator_id}/post/{post_id}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetPost.Response","title":"<code>Response</code>","text":"<p>               Bases: <code>BaseModel</code></p>"},{"location":"api/#ktoolbox.api.posts.GetPost.Response.post","title":"<code>post: Post</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetPost.Response.props","title":"<code>props: Optional[PostProps] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetPost.__call__","title":"<code>__call__(service, creator_id, post_id, revision_id=None)</code>  <code>async</code> <code>classmethod</code>","text":"<p>Get a specific post or revision</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service name</p> required <code>creator_id</code> <code>str</code> <p>The creator's ID</p> required <code>post_id</code> <code>str</code> <p>The post ID</p> required <code>revision_id</code> <code>Optional[str]</code> <p>The revision ID (optional, for revision posts)</p> <code>None</code>"},{"location":"api/#ktoolbox.api.posts.GetPostRevisions","title":"<code>GetPostRevisions</code>","text":"<p>               Bases: <code>BaseAPI</code></p>"},{"location":"api/#ktoolbox.api.posts.GetPostRevisions.method","title":"<code>method = 'get'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetPostRevisions.path","title":"<code>path = '/{service}/user/{creator_id}/post/{post_id}/revisions'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetPostRevisions.Response","title":"<code>Response</code>","text":"<p>               Bases: <code>RootModel</code></p>"},{"location":"api/#ktoolbox.api.posts.GetPostRevisions.Response.root","title":"<code>root: List[Revision]</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.api.posts.GetPostRevisions.__call__","title":"<code>__call__(service, creator_id, post_id)</code>  <code>async</code> <code>classmethod</code>","text":"<p>Get all revisions of a specific post</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service name</p> required <code>creator_id</code> <code>str</code> <p>The creator's ID</p> required <code>post_id</code> <code>str</code> <p>The post ID</p> required"},{"location":"api/#ktoolbox.api.posts.GetPostRevisions.handle_res","title":"<code>handle_res(res)</code>  <code>classmethod</code>","text":""},{"location":"api/#ktoolbox.api.utils","title":"<code>utils</code>","text":""},{"location":"api/#ktoolbox.api.utils.SEARCH_STEP","title":"<code>SEARCH_STEP = 50</code>  <code>module-attribute</code>","text":"<p>Searching APIs result steps</p>"},{"location":"api/#ktoolbox.api.utils.__all__","title":"<code>__all__ = ['SEARCH_STEP', 'get_creator_icon', 'get_creator_banner']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.api.utils.get_creator_banner","title":"<code>get_creator_banner(creator_id, service)</code>","text":"<p>Get the creator banner for a given creator ID and service.</p> <p>Returns:</p> Type Description <code>str</code> <p>The banner URL.</p>"},{"location":"api/#ktoolbox.api.utils.get_creator_icon","title":"<code>get_creator_icon(creator_id, service)</code>","text":"<p>Get the creator icon for a given creator ID and service.</p> <p>Returns:</p> Type Description <code>str</code> <p>The icon URL.</p>"},{"location":"api/#ktoolbox.cli","title":"<code>cli</code>","text":""},{"location":"api/#ktoolbox.cli.__all__","title":"<code>__all__ = ['KToolBoxCli']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.cli.KToolBoxCli","title":"<code>KToolBoxCli</code>","text":""},{"location":"api/#ktoolbox.cli.KToolBoxCli.config_editor","title":"<code>config_editor()</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Launch graphical KToolBox configuration editor</p>"},{"location":"api/#ktoolbox.cli.KToolBoxCli.download_post","title":"<code>download_post(url=None, service=None, creator_id=None, post_id=None, revision_id=None, path=Path('.'), *, dump_post_data=True)</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Download a specific post or revision</p> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>The post URL</p> <code>None</code> <code>service</code> <code>str</code> <p>The service name</p> <code>None</code> <code>creator_id</code> <code>str</code> <p>The creator's ID</p> <code>None</code> <code>post_id</code> <code>str</code> <p>The post ID</p> <code>None</code> <code>revision_id</code> <code>str</code> <p>The revision ID (optional, for revision posts)</p> <code>None</code> <code>path</code> <code>Union[Path, str]</code> <p>Download path, default is current directory</p> <code>Path('.')</code> <code>dump_post_data</code> <p>Whether to dump post data (post.json) in post directory</p> <code>True</code>"},{"location":"api/#ktoolbox.cli.KToolBoxCli.example_env","title":"<code>example_env()</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Generate an example configuration <code>.env</code> file.</p>"},{"location":"api/#ktoolbox.cli.KToolBoxCli.get_post","title":"<code>get_post(service, creator_id, post_id, revision_id=None, *, dump=None)</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Get a specific post or revision</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service name</p> required <code>creator_id</code> <code>str</code> <p>The creator's ID</p> required <code>post_id</code> <code>str</code> <p>The post ID</p> required <code>revision_id</code> <code>str</code> <p>The revision ID (optional, for revision posts)</p> <code>None</code> <code>dump</code> <code>Path</code> <p>Dump the result to a JSON file</p> <code>None</code>"},{"location":"api/#ktoolbox.cli.KToolBoxCli.search_creator","title":"<code>search_creator(name=None, id=None, service=None, *, dump=None)</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Search creator, you can use multiple parameters as keywords.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code> <code>dump</code> <code>Path</code> <p>Dump the result to a JSON file</p> <code>None</code>"},{"location":"api/#ktoolbox.cli.KToolBoxCli.search_creator_post","title":"<code>search_creator_post(id=None, name=None, service=None, q=None, o=None, *, dump=None)</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Search posts from creator, you can use multiple parameters as keywords.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code> <code>q</code> <code>str</code> <p>Search query</p> <code>None</code> <code>o</code> <code>int</code> <p>Result offset, stepping of 50 is enforced</p> <code>None</code> <code>dump</code> <code>Path</code> <p>Dump the result to a JSON file</p> <code>None</code>"},{"location":"api/#ktoolbox.cli.KToolBoxCli.site_version","title":"<code>site_version()</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Show current Kemono site app commit hash</p>"},{"location":"api/#ktoolbox.cli.KToolBoxCli.sync_creator","title":"<code>sync_creator(url=None, service=None, creator_id=None, path=Path('.'), *, save_creator_indices=False, mix_posts=None, start_time=None, end_time=None, offset=0, length=None, keywords=None)</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Sync posts from a creator</p> <p>You can update the directory anytime after download finished,         such as to update after creator published new posts.</p> <ul> <li><code>start_time</code> &amp; <code>end_time</code> example: <code>2023-12-7</code>, <code>2023-12-07</code></li> </ul> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>The post URL</p> <code>None</code> <code>service</code> <code>str</code> <p>The service where the post is located</p> <code>None</code> <code>creator_id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>path</code> <code>Union[Path, str]</code> <p>Download path, default is current directory</p> <code>Path('.')</code> <code>save_creator_indices</code> <code>bool</code> <p>Record <code>CreatorIndices</code> data</p> <code>False</code> <code>mix_posts</code> <code>bool</code> <p>Save all_pages files from different posts at same path,             <code>save_creator_indices</code> will be ignored if enabled</p> <code>None</code> <code>start_time</code> <code>str</code> <p>Start time of the published time range for posts downloading.             Set to <code>0</code> if <code>None</code> was given.             Time format: <code>%Y-%m-%d</code></p> <code>None</code> <code>end_time</code> <code>str</code> <p>End time of the published time range for posts downloading.             Set to latest time (infinity) if <code>None</code> was given.             Time format: <code>%Y-%m-%d</code></p> <code>None</code> <code>offset</code> <code>int</code> <p>Result offset (or start offset)</p> <code>0</code> <code>length</code> <code>int</code> <p>The number of posts to fetch, defaults to fetching all posts after <code>offset</code>.</p> <code>None</code> <code>keywords</code> <code>str</code> <p>Comma-separated keywords to filter posts by title (case-insensitive)</p> <code>None</code>"},{"location":"api/#ktoolbox.cli.KToolBoxCli.version","title":"<code>version()</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Show KToolBox version</p>"},{"location":"api/#ktoolbox.configuration","title":"<code>configuration</code>","text":""},{"location":"api/#ktoolbox.configuration.__all__","title":"<code>__all__ = ['config', 'APIConfiguration', 'DownloaderConfiguration', 'PostStructureConfiguration', 'JobConfiguration', 'LoggerConfiguration', 'Configuration']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.config","title":"<code>config = Configuration()</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.APIConfiguration","title":"<code>APIConfiguration</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Kemono API Configuration</p> <p>Attributes:</p> Name Type Description Default Value <code>scheme</code> <code>Literal['http', 'https']</code> <p>Kemono API URL scheme</p> <code>                       'https'               </code> <code>netloc</code> <code>str</code> <p>Kemono API URL netloc</p> <code>                       'kemono.cr'               </code> <code>statics_netloc</code> <code>str</code> <p>URL netloc of Kemono server for static files (e.g. images)</p> <code>                       'img.kemono.cr'               </code> <code>files_netloc</code> <code>str</code> <p>URL netloc of Kemono server for post files</p> <code>                       'kemono.cr'               </code> <code>path</code> <code>str</code> <p>Kemono API URL root path</p> <code>                       '/api/v1'               </code> <code>timeout</code> <code>float</code> <p>API request timeout</p> <code>                       5.0               </code> <code>retry_times</code> <code>int</code> <p>API request retry times (when request failed)</p> <code>                       3               </code> <code>retry_interval</code> <code>float</code> <p>Seconds of API request retry interval</p> <code>                       2.0               </code> <code>session_key</code> <code>str</code> <p>Session key that can be found in cookies after a successful login</p> <code>                       ''               </code>"},{"location":"api/#ktoolbox.configuration.APIConfiguration.files_netloc","title":"<code>files_netloc: str = 'kemono.cr'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.APIConfiguration.netloc","title":"<code>netloc: str = 'kemono.cr'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.APIConfiguration.path","title":"<code>path: str = '/api/v1'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.APIConfiguration.retry_interval","title":"<code>retry_interval: float = 2.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.APIConfiguration.retry_times","title":"<code>retry_times: int = 3</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.APIConfiguration.scheme","title":"<code>scheme: Literal['http', 'https'] = 'https'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.APIConfiguration.session_key","title":"<code>session_key: str = ''</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.APIConfiguration.statics_netloc","title":"<code>statics_netloc: str = 'img.kemono.cr'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.APIConfiguration.timeout","title":"<code>timeout: float = 5.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.Configuration","title":"<code>Configuration</code>","text":"<p>               Bases: <code>BaseSettings</code></p> <p>KToolBox Configuration</p> <p>Attributes:</p> Name Type Description Default Value <code>api</code> <code>APIConfiguration</code> <p>Kemono API Configuration</p> <code>                       APIConfiguration()               </code> <code>downloader</code> <code>DownloaderConfiguration</code> <p>File Downloader Configuration</p> <code>                       DownloaderConfiguration()               </code> <code>job</code> <code>JobConfiguration</code> <p>Download jobs Configuration</p> <code>                       JobConfiguration()               </code> <code>logger</code> <code>LoggerConfiguration</code> <p>Logger configuration</p> <code>                       LoggerConfiguration()               </code> <code>ssl_verify</code> <code>bool</code> <p>Enable SSL certificate verification for Kemono API server and download server</p> <code>                       True               </code> <code>json_dump_indent</code> <code>int</code> <p>Indent of JSON file dump</p> <code>                       4               </code> <code>use_uvloop</code> <code>bool</code> <p>Use uvloop/winloop for asyncio performance optimization     Uses winloop on Windows and uvloop on Unix-like systems for better concurrent performance.     Install winloop on Windows with <code>pip install ktoolbox[winloop]</code>     or uvloop on Unix with <code>pip install ktoolbox[uvloop]</code>.</p> <code>                       True               </code>"},{"location":"api/#ktoolbox.configuration.Configuration.api","title":"<code>api: APIConfiguration = APIConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.Configuration.downloader","title":"<code>downloader: DownloaderConfiguration = DownloaderConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.Configuration.job","title":"<code>job: JobConfiguration = JobConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.Configuration.json_dump_indent","title":"<code>json_dump_indent: int = 4</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.Configuration.logger","title":"<code>logger: LoggerConfiguration = LoggerConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.Configuration.model_config","title":"<code>model_config: SettingsConfigDict = SettingsConfigDict(env_prefix='ktoolbox_', env_nested_delimiter='__', env_file=['.env', 'prod.env'], env_file_encoding='utf-8', extra='ignore')</code>  <code>class-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.Configuration.ssl_verify","title":"<code>ssl_verify: bool = True</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.Configuration.use_uvloop","title":"<code>use_uvloop: bool = True</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration","title":"<code>DownloaderConfiguration</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>File Downloader Configuration</p> <p>Attributes:</p> Name Type Description Default Value <code>scheme</code> <code>Literal['http', 'https']</code> <p>Downloader URL scheme</p> <code>                       'https'               </code> <code>timeout</code> <code>float</code> <p>Downloader request timeout</p> <code>                       30.0               </code> <code>encoding</code> <code>str</code> <p>Charset for filename parsing and post content text saving</p> <code>                       'utf-8'               </code> <code>buffer_size</code> <code>int</code> <p>Number of bytes of file I/O buffer for each downloading file</p> <code>                       20480               </code> <code>chunk_size</code> <code>int</code> <p>Number of bytes of chunk of downloader stream</p> <code>                       1024               </code> <code>temp_suffix</code> <code>str</code> <p>Temp filename suffix of downloading files</p> <code>                       'tmp'               </code> <code>retry_times</code> <code>int</code> <p>Downloader retry times (when download failed)</p> <code>                       10               </code> <code>retry_stop_never</code> <code>bool</code> <p>Never stop downloader from retrying (when download failed)     (<code>retry_times</code> will be ignored when enabled)</p> <code>                       False               </code> <code>retry_interval</code> <code>float</code> <p>Seconds of downloader retry interval</p> <code>                       3.0               </code> <code>tps_limit</code> <code>float</code> <p>Maximum connections established per second</p> <code>                       1.0               </code> <code>use_bucket</code> <code>bool</code> <p>Enable local storage bucket mode</p> <code>                       False               </code> <code>bucket_path</code> <code>Path</code> <p>Path of local storage bucket</p> <code>                       Path('./.ktoolbox/bucket_storage')               </code> <code>reverse_proxy</code> <code>str</code> <p>Reverse proxy format for download URL.     Customize the filename format by inserting an empty <code>{}</code> to represent the original URL.     For example: <code>https://example.com/{}</code> will be <code>https://example.com/https://n1.kemono.su/data/66/83/xxxxx.jpg</code>;      <code>https://example.com/?url={}</code> will be <code>https://example.com/?url=https://n1.kemono.su/data/66/83/xxxxx.jpg</code></p> <code>                       '{}'               </code>"},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.bucket_path","title":"<code>bucket_path: Path = Path('./.ktoolbox/bucket_storage')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.buffer_size","title":"<code>buffer_size: int = 20480</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.chunk_size","title":"<code>chunk_size: int = 1024</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.encoding","title":"<code>encoding: str = 'utf-8'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.retry_interval","title":"<code>retry_interval: float = 3.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.retry_stop_never","title":"<code>retry_stop_never: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.retry_times","title":"<code>retry_times: int = 10</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.reverse_proxy","title":"<code>reverse_proxy: str = '{}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.scheme","title":"<code>scheme: Literal['http', 'https'] = 'https'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.temp_suffix","title":"<code>temp_suffix: str = 'tmp'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.timeout","title":"<code>timeout: float = 30.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.tps_limit","title":"<code>tps_limit: float = 1.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.use_bucket","title":"<code>use_bucket: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.DownloaderConfiguration.check_bucket_path","title":"<code>check_bucket_path()</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration","title":"<code>JobConfiguration</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Download jobs Configuration</p> <ul> <li> <p>Available properties for <code>post_dirname_format</code> and <code>filename_format</code></p> Property Type <code>id</code> String <code>user</code> String <code>service</code> String <code>title</code> String <code>added</code> Date <code>published</code> Date <code>edited</code> Date </li> </ul> <p>Attributes:</p> Name Type Description Default Value <code>count</code> <code>int</code> <p>Number of coroutines for concurrent download</p> <code>                       4               </code> <code>include_revisions</code> <code>bool</code> <p>Include and download revision posts when available</p> <code>                       False               </code> <code>post_dirname_format</code> <code>str</code> <p>Customize the post directory name format, you can use some of the     properties in <code>Post</code>.     e.g. <code>[{published}]{id}</code> &gt; <code>[2024-1-1]123123</code>, <code>{user}_{published}_{title}</code> &gt; <code>234234_2024-1-1_TheTitle</code></p> <code>                       '{title}'               </code> <code>post_structure</code> <code>PostStructureConfiguration</code> <p>Post path structure</p> <code>                       PostStructureConfiguration()               </code> <code>mix_posts</code> <code>bool</code> <p>Save all files from different posts at same path in creator directory.     It would not create any post directory, and <code>CreatorIndices</code> would not been recorded.</p> <code>                       False               </code> <code>sequential_filename</code> <code>bool</code> <p>Rename attachments in numerical order, e.g. <code>1.png</code>, <code>2.png</code>, ...</p> <code>                       False               </code> <code>sequential_filename_excludes</code> <code>Set[str]</code> <p>File extensions to exclude from sequential naming when <code>sequential_filename</code> is enabled.     Files with these extensions will keep their original names. e.g. <code>[\".psd\", \".zip\", \".mp4\"]</code></p> <code>                       Field(default_factory=set)               </code> <code>filename_format</code> <code>str</code> <p>Customize the filename format by inserting an empty <code>{}</code> to represent the basic filename. Similar to post_dirname_format, you can use some of the properties     in Post. For example: <code>{title}_{}</code> could result in filenames like     <code>TheTitle_b4b41de2-8736-480d-b5c3-ebf0d917561b</code>, <code>TheTitle_af349b25-ac08-46d7-98fb-6ce99a237b90</code>, etc.     You can also use it with <code>sequential_filename</code>. For instance,     <code>[{published}]_{}</code> could result in filenames like <code>[2024-1-1]_1.png</code>, <code>[2024-1-1]_2.png</code>, etc.</p> <code>                       '{}'               </code> <code>allow_list</code> <code>Set[str]</code> <p>Download files which match these patterns (Unix shell-style), e.g. <code>[\"*.png\"]</code></p> <code>                       Field(default_factory=set)               </code> <code>block_list</code> <code>Set[str]</code> <p>Not to download files which match these patterns (Unix shell-style), e.g. <code>[\"*.psd\",\"*.zip\"]</code></p> <code>                       Field(default_factory=set)               </code> <code>extract_external_links</code> <code>bool</code> <p>Extract external file sharing links from post content and save to separate file</p> <code>                       True               </code> <code>external_link_patterns</code> <code>List[str]</code> <p>Regex patterns for extracting external links.</p> <code>                       ['https?://drive\\\\.google\\\\.com/[^\\\\s]+', 'https?://docs\\\\.google\\\\.com/[^\\\\s]+', 'https?://mega\\\\.nz/[^\\\\s]+', 'https?://mega\\\\.co\\\\.nz/[^\\\\s]+', 'https?://(?:www\\\\.)?dropbox\\\\.com/[^\\\\s]+', 'https?://db\\\\.tt/[^\\\\s]+', 'https?://onedrive\\\\.live\\\\.com/[^\\\\s]+', 'https?://1drv\\\\.ms/[^\\\\s]+', 'https?://(?:www\\\\.)?mediafire\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?wetransfer\\\\.com/[^\\\\s]+', 'https?://we\\\\.tl/[^\\\\s]+', 'https?://(?:www\\\\.)?sendspace\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?4shared\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?zippyshare\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?uploadfiles\\\\.io/[^\\\\s]+', 'https?://(?:www\\\\.)?box\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?pcloud\\\\.com/[^\\\\s]+', 'https?://disk\\\\.yandex\\\\.[a-z]+/[^\\\\s]+', 'https?://[^\\\\s]*(?:file|upload|share|download|drive|storage)[^\\\\s]*\\\\.[a-z]{2,4}/[^\\\\s]+']               </code>"},{"location":"api/#ktoolbox.configuration.JobConfiguration.allow_list","title":"<code>allow_list: Set[str] = Field(default_factory=set)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.block_list","title":"<code>block_list: Set[str] = Field(default_factory=set)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.count","title":"<code>count: int = 4</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.external_link_patterns","title":"<code>external_link_patterns: List[str] = ['https?://drive\\\\.google\\\\.com/[^\\\\s]+', 'https?://docs\\\\.google\\\\.com/[^\\\\s]+', 'https?://mega\\\\.nz/[^\\\\s]+', 'https?://mega\\\\.co\\\\.nz/[^\\\\s]+', 'https?://(?:www\\\\.)?dropbox\\\\.com/[^\\\\s]+', 'https?://db\\\\.tt/[^\\\\s]+', 'https?://onedrive\\\\.live\\\\.com/[^\\\\s]+', 'https?://1drv\\\\.ms/[^\\\\s]+', 'https?://(?:www\\\\.)?mediafire\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?wetransfer\\\\.com/[^\\\\s]+', 'https?://we\\\\.tl/[^\\\\s]+', 'https?://(?:www\\\\.)?sendspace\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?4shared\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?zippyshare\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?uploadfiles\\\\.io/[^\\\\s]+', 'https?://(?:www\\\\.)?box\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?pcloud\\\\.com/[^\\\\s]+', 'https?://disk\\\\.yandex\\\\.[a-z]+/[^\\\\s]+', 'https?://[^\\\\s]*(?:file|upload|share|download|drive|storage)[^\\\\s]*\\\\.[a-z]{2,4}/[^\\\\s]+']</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.extract_external_links","title":"<code>extract_external_links: bool = True</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.filename_format","title":"<code>filename_format: str = '{}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.include_revisions","title":"<code>include_revisions: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.mix_posts","title":"<code>mix_posts: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.post_dirname_format","title":"<code>post_dirname_format: str = '{title}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.post_structure","title":"<code>post_structure: PostStructureConfiguration = PostStructureConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.sequential_filename","title":"<code>sequential_filename: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.JobConfiguration.sequential_filename_excludes","title":"<code>sequential_filename_excludes: Set[str] = Field(default_factory=set)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.LoggerConfiguration","title":"<code>LoggerConfiguration</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Logger configuration</p> <p>Attributes:</p> Name Type Description Default Value <code>path</code> <code>Optional[Path]</code> <p>Path to save logs, <code>None</code> for disable log file output</p> <code>                       None               </code> <code>level</code> <code>Union[str, int]</code> <p>Log filter level</p> <code>                       logging.getLevelName(logging.DEBUG)               </code> <code>rotation</code> <code>Union[str, int, time, timedelta]</code> <p>Log rotation</p> <code>                       '1 week'               </code>"},{"location":"api/#ktoolbox.configuration.LoggerConfiguration.level","title":"<code>level: Union[str, int] = logging.getLevelName(logging.DEBUG)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.LoggerConfiguration.path","title":"<code>path: Optional[Path] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.LoggerConfiguration.rotation","title":"<code>rotation: Union[str, int, datetime.time, datetime.timedelta] = '1 week'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.PostStructureConfiguration","title":"<code>PostStructureConfiguration</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Post path structure model</p> <ul> <li> <p>Default: <pre><code>..\n\u251c\u2500 content.txt\n\u251c\u2500 external_links.txt\n\u251c\u2500 {id}_{}.png (file)\n\u251c\u2500 post.json (metadata)\n\u251c\u2500 attachments\n\u2502    \u251c\u2500 1.png\n\u2502    \u2514\u2500 2.png\n\u2514\u2500 revisions\n     \u251c\u2500 &lt;PostStructure&gt;\n     \u2502    \u251c\u2500 ...\n     \u2502    \u2514\u2500 ...\n     \u2514\u2500 &lt;PostStructure&gt;\n          \u251c\u2500 ...\n          \u2514\u2500 ...\n</code></pre></p> </li> <li> <p>Available properties for <code>file</code></p> Property Type <code>id</code> String <code>user</code> String <code>service</code> String <code>title</code> String <code>added</code> Date <code>published</code> Date <code>edited</code> Date </li> </ul> <p>Attributes:</p> Name Type Description Default Value <code>attachments</code> <code>Path</code> <p>Sub path of attachment directory</p> <code>                       Path('attachments')               </code> <code>content</code> <code>Path</code> <p>Sub path of post content file</p> <code>                       Path('content.txt')               </code> <code>external_links</code> <code>Path</code> <p>Sub path of external links file (for cloud storage links found in content)</p> <code>                       Path('external_links.txt')               </code> <code>file</code> <code>str</code> <p>The format of the post <code>file</code> filename (<code>file</code> is not <code>attachment</code>, each post has only one <code>file</code>, usually the cover image)     Customize the filename format by inserting an empty <code>{}</code> to represent the basic filename.     You can use some of the properties     in Post. For example: <code>{title}_{}</code> could result in filenames like     <code>TheTitle_Stelle_lv5_logo.gif</code>, <code>TheTitle_ScxHjZIdxt5cnjaAwf3ql2p7.jpg</code>, etc.</p> <code>                       '{id}_{}'               </code> <code>revisions</code> <code>Path</code> <p>Sub path of revisions directory</p> <code>                       Path('revisions')               </code>"},{"location":"api/#ktoolbox.configuration.PostStructureConfiguration.attachments","title":"<code>attachments: Path = Path('attachments')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.PostStructureConfiguration.content","title":"<code>content: Path = Path('content.txt')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.PostStructureConfiguration.external_links","title":"<code>external_links: Path = Path('external_links.txt')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.PostStructureConfiguration.file","title":"<code>file: str = '{id}_{}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.configuration.PostStructureConfiguration.revisions","title":"<code>revisions: Path = Path('revisions')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader","title":"<code>downloader</code>","text":""},{"location":"api/#ktoolbox.downloader.Downloader","title":"<code>Downloader</code>","text":"<p>Attributes:</p> Name Type Description Default Value <code>_save_filename</code> <p>The actual filename for saving.</p> <code>                       designated_filename               </code>"},{"location":"api/#ktoolbox.downloader.Downloader.__call__","title":"<code>__call__ = run</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.Downloader.buffer_size","title":"<code>buffer_size: int</code>  <code>cached</code> <code>property</code>","text":"<p>Number of bytes for file I/O buffer</p>"},{"location":"api/#ktoolbox.downloader.Downloader.chunk_size","title":"<code>chunk_size: int</code>  <code>cached</code> <code>property</code>","text":"<p>Number of bytes for chunk of download stream</p>"},{"location":"api/#ktoolbox.downloader.Downloader.client","title":"<code>client: httpx.AsyncClient</code>  <code>cached</code> <code>property</code>","text":"<p>HTTPX AsyncClient</p>"},{"location":"api/#ktoolbox.downloader.Downloader.failure_servers","title":"<code>failure_servers: Set[int] = set()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.Downloader.filename","title":"<code>filename: Optional[str]</code>  <code>property</code>","text":"<p>Actual filename of the download file</p>"},{"location":"api/#ktoolbox.downloader.Downloader.finished","title":"<code>finished: bool</code>  <code>property</code>","text":"<p>Check if the download finished</p> <p>Returns:</p> Type Description <code>bool</code> <p><code>False</code> if the download in process, <code>True</code> otherwise</p>"},{"location":"api/#ktoolbox.downloader.Downloader.path","title":"<code>path: Path</code>  <code>cached</code> <code>property</code>","text":"<p>Directory path to save the file</p>"},{"location":"api/#ktoolbox.downloader.Downloader.post","title":"<code>post: Post</code>  <code>cached</code> <code>property</code>","text":"<p>Post that the file belongs to</p>"},{"location":"api/#ktoolbox.downloader.Downloader.succeeded_servers","title":"<code>succeeded_servers: Set[int] = set()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.Downloader.url","title":"<code>url: str</code>  <code>cached</code> <code>property</code>","text":"<p>Download URL</p>"},{"location":"api/#ktoolbox.downloader.Downloader.wait_lock","title":"<code>wait_lock = Lock()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.Downloader.__init__","title":"<code>__init__(url, path, client, *, buffer_size=None, chunk_size=None, designated_filename=None, server_path=None, post=None)</code>","text":"<p>Initialize a file downloader</p> <ul> <li>About filename:<ol> <li>If <code>designated_filename</code> parameter is set, use it.</li> <li>Else if <code>Content-Disposition</code> is set in headers, use filename from it.</li> <li>Else use filename from 'file' part of <code>server_path</code>.</li> </ol> </li> </ul> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>Download URL</p> required <code>path</code> <code>Path</code> <p>Directory path to save the file, which needs to be sanitized</p> required <code>client</code> <code>AsyncClient</code> <p>HTTPX AsyncClient</p> required <code>buffer_size</code> <code>int</code> <p>Number of bytes for file I/O buffer</p> <code>None</code> <code>chunk_size</code> <code>int</code> <p>Number of bytes for chunk of download stream</p> <code>None</code> <code>designated_filename</code> <code>str</code> <p>Manually specify the filename for saving, which needs to be sanitized</p> <code>None</code> <code>server_path</code> <code>str</code> <p>Server path of the file. if <code>DownloaderConfiguration.use_bucket</code> enabled,         it will be used as the save path.</p> <code>None</code> <code>post</code> <code>Post</code> <p>Post object, use for logging.</p> <code>None</code>"},{"location":"api/#ktoolbox.downloader.Downloader.cancel","title":"<code>cancel()</code>","text":"<p>Cancel the download</p> <p>It will raise <code>asyncio.CancelledError</code> in <code>chunk_iterator</code> (writing chunk to file) iteration.</p>"},{"location":"api/#ktoolbox.downloader.Downloader.run","title":"<code>run(*, sync_callable=None, async_callable=None, tqdm_class=None, progress=False)</code>  <code>async</code>","text":"<p>Start to download</p> <p>Parameters:</p> Name Type Description Default <code>sync_callable</code> <code>Callable[[Downloader], Any]</code> <p>Sync callable for download finished</p> <code>None</code> <code>async_callable</code> <code>Callable[[Downloader], Coroutine]</code> <p>Async callable for download finished</p> <code>None</code> <code>tqdm_class</code> <code>Type[tqdm]</code> <p><code>tqdm</code> class to replace default <code>tqdm.asyncio.tqdm</code></p> <code>None</code> <code>progress</code> <code>bool</code> <p>Show progress bar</p> <code>False</code> <p>Returns:</p> Type Description <code>DownloaderRet[str]</code> <p><code>DownloaderRet</code> which contain the actual output filename</p> <p>Raises:</p> Type Description <code>CancelledError</code> <p>Job cancelled</p>"},{"location":"api/#ktoolbox.downloader.DownloaderRet","title":"<code>DownloaderRet</code>","text":"<p>               Bases: <code>BaseRet[_T]</code></p> <p>Return data model of action call</p>"},{"location":"api/#ktoolbox.downloader.duplicate_file_check","title":"<code>duplicate_file_check(local_file_path, bucket_file_path=None)</code>","text":"<p>Check if the file existed, and link the bucket filepath to local filepath     if <code>DownloaderConfiguration.use_bucket</code> enabled.</p> <p>Parameters:</p> Name Type Description Default <code>local_file_path</code> <code>Path</code> <p>Download target path</p> required <code>bucket_file_path</code> <code>Path</code> <p>The bucket filepath of the local download path</p> <code>None</code> <p>Returns:</p> Type Description <code>Tuple[bool, Optional[str]]</code> <p><code>(if file existed, message)</code></p>"},{"location":"api/#ktoolbox.downloader.filename_from_headers","title":"<code>filename_from_headers(headers)</code>","text":"<p>Get file name from headers.</p> <p>Parse from <code>Content-Disposition</code>.</p> <ul> <li> <p>Example: <pre><code>filename_from_headers({'Content-Disposition': 'attachment;filename*=utf-8''README%2Emd;filename=\"README.md\"'})\n</code></pre></p> </li> <li> <p>Return: <pre><code>README.md\n</code></pre></p> </li> </ul> <p>Parameters:</p> Name Type Description Default <code>headers</code> <code>Dict[str, str]</code> <p>HTTP headers</p> required <p>Returns:</p> Type Description <code>Optional[str]</code> <p>File name</p>"},{"location":"api/#ktoolbox.downloader.utime_from_headers","title":"<code>utime_from_headers(headers, path)</code>","text":"<p>Run <code>os.utime</code> on specific file using <code>Last-Modified</code> or <code>Date</code> in HTTP headers.</p> <p>Parameters:</p> Name Type Description Default <code>headers</code> <code>Dict[str, str]</code> <p>HTTP Headers</p> required <code>path</code> <code>Union[Path, str]</code> <p>File path</p> required"},{"location":"api/#ktoolbox.downloader.base","title":"<code>base</code>","text":""},{"location":"api/#ktoolbox.downloader.base.__all__","title":"<code>__all__ = ['DownloaderRet']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.base.DownloaderRet","title":"<code>DownloaderRet</code>","text":"<p>               Bases: <code>BaseRet[_T]</code></p> <p>Return data model of action call</p>"},{"location":"api/#ktoolbox.downloader.downloader","title":"<code>downloader</code>","text":""},{"location":"api/#ktoolbox.downloader.downloader.__all__","title":"<code>__all__ = ['Downloader']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.downloader.Downloader","title":"<code>Downloader</code>","text":"<p>Attributes:</p> Name Type Description Default Value <code>_save_filename</code> <p>The actual filename for saving.</p> <code>                       designated_filename               </code>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.__call__","title":"<code>__call__ = run</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.downloader.Downloader.buffer_size","title":"<code>buffer_size: int</code>  <code>cached</code> <code>property</code>","text":"<p>Number of bytes for file I/O buffer</p>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.chunk_size","title":"<code>chunk_size: int</code>  <code>cached</code> <code>property</code>","text":"<p>Number of bytes for chunk of download stream</p>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.client","title":"<code>client: httpx.AsyncClient</code>  <code>cached</code> <code>property</code>","text":"<p>HTTPX AsyncClient</p>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.failure_servers","title":"<code>failure_servers: Set[int] = set()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.downloader.Downloader.filename","title":"<code>filename: Optional[str]</code>  <code>property</code>","text":"<p>Actual filename of the download file</p>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.finished","title":"<code>finished: bool</code>  <code>property</code>","text":"<p>Check if the download finished</p> <p>Returns:</p> Type Description <code>bool</code> <p><code>False</code> if the download in process, <code>True</code> otherwise</p>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.path","title":"<code>path: Path</code>  <code>cached</code> <code>property</code>","text":"<p>Directory path to save the file</p>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.post","title":"<code>post: Post</code>  <code>cached</code> <code>property</code>","text":"<p>Post that the file belongs to</p>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.succeeded_servers","title":"<code>succeeded_servers: Set[int] = set()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.downloader.Downloader.url","title":"<code>url: str</code>  <code>cached</code> <code>property</code>","text":"<p>Download URL</p>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.wait_lock","title":"<code>wait_lock = Lock()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.downloader.Downloader.__init__","title":"<code>__init__(url, path, client, *, buffer_size=None, chunk_size=None, designated_filename=None, server_path=None, post=None)</code>","text":"<p>Initialize a file downloader</p> <ul> <li>About filename:<ol> <li>If <code>designated_filename</code> parameter is set, use it.</li> <li>Else if <code>Content-Disposition</code> is set in headers, use filename from it.</li> <li>Else use filename from 'file' part of <code>server_path</code>.</li> </ol> </li> </ul> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>Download URL</p> required <code>path</code> <code>Path</code> <p>Directory path to save the file, which needs to be sanitized</p> required <code>client</code> <code>AsyncClient</code> <p>HTTPX AsyncClient</p> required <code>buffer_size</code> <code>int</code> <p>Number of bytes for file I/O buffer</p> <code>None</code> <code>chunk_size</code> <code>int</code> <p>Number of bytes for chunk of download stream</p> <code>None</code> <code>designated_filename</code> <code>str</code> <p>Manually specify the filename for saving, which needs to be sanitized</p> <code>None</code> <code>server_path</code> <code>str</code> <p>Server path of the file. if <code>DownloaderConfiguration.use_bucket</code> enabled,         it will be used as the save path.</p> <code>None</code> <code>post</code> <code>Post</code> <p>Post object, use for logging.</p> <code>None</code>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.cancel","title":"<code>cancel()</code>","text":"<p>Cancel the download</p> <p>It will raise <code>asyncio.CancelledError</code> in <code>chunk_iterator</code> (writing chunk to file) iteration.</p>"},{"location":"api/#ktoolbox.downloader.downloader.Downloader.run","title":"<code>run(*, sync_callable=None, async_callable=None, tqdm_class=None, progress=False)</code>  <code>async</code>","text":"<p>Start to download</p> <p>Parameters:</p> Name Type Description Default <code>sync_callable</code> <code>Callable[[Downloader], Any]</code> <p>Sync callable for download finished</p> <code>None</code> <code>async_callable</code> <code>Callable[[Downloader], Coroutine]</code> <p>Async callable for download finished</p> <code>None</code> <code>tqdm_class</code> <code>Type[tqdm]</code> <p><code>tqdm</code> class to replace default <code>tqdm.asyncio.tqdm</code></p> <code>None</code> <code>progress</code> <code>bool</code> <p>Show progress bar</p> <code>False</code> <p>Returns:</p> Type Description <code>DownloaderRet[str]</code> <p><code>DownloaderRet</code> which contain the actual output filename</p> <p>Raises:</p> Type Description <code>CancelledError</code> <p>Job cancelled</p>"},{"location":"api/#ktoolbox.downloader.utils","title":"<code>utils</code>","text":""},{"location":"api/#ktoolbox.downloader.utils.__all__","title":"<code>__all__ = ['filename_from_headers', 'duplicate_file_check', 'utime_from_headers']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.downloader.utils.duplicate_file_check","title":"<code>duplicate_file_check(local_file_path, bucket_file_path=None)</code>","text":"<p>Check if the file existed, and link the bucket filepath to local filepath     if <code>DownloaderConfiguration.use_bucket</code> enabled.</p> <p>Parameters:</p> Name Type Description Default <code>local_file_path</code> <code>Path</code> <p>Download target path</p> required <code>bucket_file_path</code> <code>Path</code> <p>The bucket filepath of the local download path</p> <code>None</code> <p>Returns:</p> Type Description <code>Tuple[bool, Optional[str]]</code> <p><code>(if file existed, message)</code></p>"},{"location":"api/#ktoolbox.downloader.utils.filename_from_headers","title":"<code>filename_from_headers(headers)</code>","text":"<p>Get file name from headers.</p> <p>Parse from <code>Content-Disposition</code>.</p> <ul> <li> <p>Example: <pre><code>filename_from_headers({'Content-Disposition': 'attachment;filename*=utf-8''README%2Emd;filename=\"README.md\"'})\n</code></pre></p> </li> <li> <p>Return: <pre><code>README.md\n</code></pre></p> </li> </ul> <p>Parameters:</p> Name Type Description Default <code>headers</code> <code>Dict[str, str]</code> <p>HTTP headers</p> required <p>Returns:</p> Type Description <code>Optional[str]</code> <p>File name</p>"},{"location":"api/#ktoolbox.downloader.utils.parse_header","title":"<code>parse_header(line)</code>","text":"<p>Alternative resolution for parsing header line.</p> <p>Apply when <code>cgi.parse_header</code> is unable to use due to the deprecation of <code>cgi</code> module.</p> <p>https://peps.python.org/pep-0594/#cgi</p> <ul> <li> <p>Example: <pre><code>parse_header(\"text/html; charset=utf-8\")\n</code></pre></p> </li> <li> <p>Return: <pre><code>{'text/html': None, 'charset': 'utf-8'}\n</code></pre></p> </li> </ul> <p>Parameters:</p> Name Type Description Default <code>line</code> <code>str</code> <p>Header line</p> required <p>Returns:</p> Type Description <code>Dict[str, Optional[str]]</code> <p>Dict of header line</p>"},{"location":"api/#ktoolbox.downloader.utils.utime_from_headers","title":"<code>utime_from_headers(headers, path)</code>","text":"<p>Run <code>os.utime</code> on specific file using <code>Last-Modified</code> or <code>Date</code> in HTTP headers.</p> <p>Parameters:</p> Name Type Description Default <code>headers</code> <code>Dict[str, str]</code> <p>HTTP Headers</p> required <code>path</code> <code>Union[Path, str]</code> <p>File path</p> required"},{"location":"api/#ktoolbox.editor","title":"<code>editor</code>","text":""},{"location":"api/#ktoolbox.editor.__all__","title":"<code>__all__ = ['EditWithSignalWidget', 'CascadingBoxes', 'run_config_editor']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.default_config","title":"<code>default_config = Configuration(_env_file='')</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.default_config_envs","title":"<code>default_config_envs = set(dump_envs(default_config))</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.initial_envs","title":"<code>initial_envs = set(dump_envs(config))</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.menu_top","title":"<code>menu_top = menu('KToolBox Configuration Editor', [sub_menu('Edit', [sub_menu('API', model_to_widgets(config.api)), sub_menu('Downloader', model_to_widgets(config.downloader)), sub_menu('Job', model_to_widgets(config.job)), sub_menu('Logger', model_to_widgets(config.logger)), urwid.Divider()] + list(model_to_widgets(config, ['ssl_verify', 'json_dump_indent', 'use_uvloop']))), urwid.Divider(), menu_option(urwid.Button('JSON Preview', lambda x: top.open_box(sub_menu_with_menu_widget('JSON Preview', [urwid.Text(config.model_dump_json(indent=4))])[1]))), menu_option(urwid.Button('JSON Preview (Python Mode)', lambda x: top.open_box(sub_menu_with_menu_widget('JSON Preview (Python Serialize Mode)', [urwid.Text(pprint.pformat(config.model_dump(mode='python'), sort_dicts=False))])[1]))), menu_option(urwid.Button('DotEnv Preview (.env / prod.env)', lambda x: top.open_box(sub_menu_with_menu_widget('DotEnv Preview (.env / prod.env)', [urwid.Text('\\n'.join(dump_modified_envs(dump_envs(config))) or 'Same as the default configuration, DotEnv will be left empty.')])[1]))), urwid.Divider(), sub_menu('Save', [menu_option(urwid.Button(\"Save to '.env' / 'prod.env' file\", on_save_dotenv))]), urwid.Divider(bottom=2), menu_option(urwid.Button('Help', lambda x: webbrowser.open('https://ktoolbox.readthedocs.io/latest/configuration/guide/'))), menu_option(urwid.Button('Exit', exit_program)), urwid.Divider(bottom=2), urwid.Text('For detailed information, please refer to https://ktoolbox.readthedocs.io', align=urwid.CENTER), urwid.Divider(), urwid.Text(__version__, align=urwid.CENTER)])</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.top","title":"<code>top = CascadingBoxes(menu_top)</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.CascadingBoxes","title":"<code>CascadingBoxes</code>","text":"<p>               Bases: <code>WidgetPlaceholder</code></p>"},{"location":"api/#ktoolbox.editor.CascadingBoxes.box_level","title":"<code>box_level = 0</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.CascadingBoxes.max_box_levels","title":"<code>max_box_levels = 4</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.CascadingBoxes.__init__","title":"<code>__init__(box)</code>","text":""},{"location":"api/#ktoolbox.editor.CascadingBoxes.back","title":"<code>back()</code>","text":""},{"location":"api/#ktoolbox.editor.CascadingBoxes.exit","title":"<code>exit()</code>","text":""},{"location":"api/#ktoolbox.editor.CascadingBoxes.keypress","title":"<code>keypress(size, key)</code>","text":""},{"location":"api/#ktoolbox.editor.CascadingBoxes.open_box","title":"<code>open_box(box)</code>","text":""},{"location":"api/#ktoolbox.editor.EditWithSignalWidget","title":"<code>EditWithSignalWidget</code>","text":"<p>               Bases: <code>Edit</code></p> <p>Custom <code>urwid.Edit</code>, support callback when changed.</p>"},{"location":"api/#ktoolbox.editor.EditWithSignalWidget.__on_state_change","title":"<code>__on_state_change = on_state_change</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.EditWithSignalWidget.__user_data","title":"<code>__user_data = user_data</code>  <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.editor.EditWithSignalWidget.__init__","title":"<code>__init__(*args, on_state_change, user_data, **kwargs)</code>","text":""},{"location":"api/#ktoolbox.editor.EditWithSignalWidget.keypress","title":"<code>keypress(size, key)</code>","text":""},{"location":"api/#ktoolbox.editor.dump_envs","title":"<code>dump_envs(model)</code>","text":"<p>Dump environment variables, with no Env prefix</p>"},{"location":"api/#ktoolbox.editor.dump_modified_envs","title":"<code>dump_modified_envs(envs)</code>","text":"<p>Dump modified environment variables, with Env prefix</p> <p>Parameters:</p> Name Type Description Default <code>envs</code> <code>List[str]</code> <p>Current Envs</p> required"},{"location":"api/#ktoolbox.editor.exit_program","title":"<code>exit_program(_=None)</code>","text":""},{"location":"api/#ktoolbox.editor.get_item","title":"<code>get_item(model, field, get_value_callback, widget_list, list_walker)</code>","text":""},{"location":"api/#ktoolbox.editor.get_value","title":"<code>get_value(item_types)</code>","text":""},{"location":"api/#ktoolbox.editor.has_changed","title":"<code>has_changed()</code>","text":""},{"location":"api/#ktoolbox.editor.menu","title":"<code>menu(title, choices)</code>","text":""},{"location":"api/#ktoolbox.editor.menu_option","title":"<code>menu_option(widget)</code>","text":"<p>Return <code>focus_map=\"reversed\"</code> Widget</p>"},{"location":"api/#ktoolbox.editor.model_to_widgets","title":"<code>model_to_widgets(model, fields=None)</code>","text":"<p>Generate urwid widgets for Pydantic model</p> <p>Parameters:</p> Name Type Description Default <code>model</code> <code>BaseModel</code> <p>Pydantic model</p> required <code>fields</code> <code>Iterable[str]</code> <p>Only generate for these fields, default to all fields.</p> <code>None</code>"},{"location":"api/#ktoolbox.editor.on_add_item","title":"<code>on_add_item(_, user_data)</code>","text":"<p>Call when add item to List/Set/Tuple field</p> <p>Parameters:</p> Name Type Description Default <code>_</code> <code>Button</code> <p>Widget</p> required <code>user_data</code> <code>Tuple[BaseModel, str, Callable[[], Optional[Any]], Union[List[_T], List[None]], Callable[[], _T], Union[MonitoredFocusList[_T], ListWalker]]</code> <p>(model, field, () -&gt; (default value), item list, () -&gt; (new item), menu widget)</p> required"},{"location":"api/#ktoolbox.editor.on_checkbox_change","title":"<code>on_checkbox_change(_, state, user_data)</code>","text":""},{"location":"api/#ktoolbox.editor.on_edit_change","title":"<code>on_edit_change(widget, user_data)</code>","text":""},{"location":"api/#ktoolbox.editor.on_item_changed","title":"<code>on_item_changed(widget, user_data)</code>","text":"<p>Call when List/Set/Tuple field item changed</p> <p>Parameters:</p> Name Type Description Default <code>widget</code> <code>EditWithSignalWidget</code> <p>Widget</p> required <code>user_data</code> <code>Tuple[BaseModel, str, Callable[[EditWithSignalWidget], Any], Union[List[_T], List[None]], _T]</code> <p>(model, field, (edit widget) -&gt; (value), item list, item)</p> required"},{"location":"api/#ktoolbox.editor.on_radio_button_change","title":"<code>on_radio_button_change(_, state, user_data)</code>","text":""},{"location":"api/#ktoolbox.editor.on_remove_item","title":"<code>on_remove_item(_, user_data)</code>","text":"<p>Call when remove item to List/Set/Tuple field</p> <p>Parameters:</p> Name Type Description Default <code>_</code> <code>Button</code> <p>Widget</p> required <code>user_data</code> <code>Tuple[BaseModel, str, Union[List[_T], List[None]], _T, Union[MonitoredFocusList[_T], ListWalker]]</code> <p>(model, field, item list, item, menu widget)</p> required"},{"location":"api/#ktoolbox.editor.on_save_dotenv","title":"<code>on_save_dotenv(_)</code>","text":""},{"location":"api/#ktoolbox.editor.run_config_editor","title":"<code>run_config_editor()</code>","text":""},{"location":"api/#ktoolbox.editor.save_dotenv","title":"<code>save_dotenv()</code>","text":""},{"location":"api/#ktoolbox.editor.sub_menu","title":"<code>sub_menu(caption, choices)</code>","text":""},{"location":"api/#ktoolbox.editor.sub_menu_with_menu_widget","title":"<code>sub_menu_with_menu_widget(caption, choices)</code>","text":""},{"location":"api/#ktoolbox.job","title":"<code>job</code>","text":""},{"location":"api/#ktoolbox.job.CreatorIndices","title":"<code>CreatorIndices</code>","text":"<p>               Bases: <code>BaseKToolBoxData</code></p> <p>Creator directory indices model</p> <p>Record the path of each downloaded post.</p>"},{"location":"api/#ktoolbox.job.CreatorIndices.creator_id","title":"<code>creator_id: str</code>  <code>instance-attribute</code>","text":"<p>Creator ID</p>"},{"location":"api/#ktoolbox.job.CreatorIndices.posts","title":"<code>posts: Dict[str, Post] = {}</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>All posts, <code>id</code> -&gt; <code>Post</code></p>"},{"location":"api/#ktoolbox.job.CreatorIndices.posts_path","title":"<code>posts_path: Dict[str, Path] = {}</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>Posts and their path, <code>id</code> -&gt; <code>Path</code></p>"},{"location":"api/#ktoolbox.job.CreatorIndices.service","title":"<code>service: str</code>  <code>instance-attribute</code>","text":"<p>Creator service</p>"},{"location":"api/#ktoolbox.job.Job","title":"<code>Job</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Download job model</p>"},{"location":"api/#ktoolbox.job.Job.alt_filename","title":"<code>alt_filename: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>Use this name if no filename given by the server</p>"},{"location":"api/#ktoolbox.job.Job.path","title":"<code>path: Path</code>  <code>instance-attribute</code>","text":"<p>Directory path to save the file</p>"},{"location":"api/#ktoolbox.job.Job.post","title":"<code>post: Optional[Post] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>Post object</p>"},{"location":"api/#ktoolbox.job.Job.server_path","title":"<code>server_path: str</code>  <code>instance-attribute</code>","text":"<p>The <code>path</code> part of download URL</p>"},{"location":"api/#ktoolbox.job.Job.type","title":"<code>type: Optional[Literal[PostFileTypeEnum.Attachment, PostFileTypeEnum.File]] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>Target file type</p>"},{"location":"api/#ktoolbox.job.JobListData","title":"<code>JobListData</code>","text":"<p>               Bases: <code>BaseKToolBoxData</code></p> <p>Download job list data model</p> <p>For saving the list of jobs to disk.</p>"},{"location":"api/#ktoolbox.job.JobListData.jobs","title":"<code>jobs: List[Job] = []</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>All jobs</p>"},{"location":"api/#ktoolbox.job.JobRunner","title":"<code>JobRunner</code>","text":""},{"location":"api/#ktoolbox.job.JobRunner.done_size","title":"<code>done_size: int</code>  <code>property</code>","text":"<p>Get the number of jobs that done</p>"},{"location":"api/#ktoolbox.job.JobRunner.downloaders","title":"<code>downloaders</code>  <code>cached</code> <code>property</code>","text":"<p>Get downloaders with task</p>"},{"location":"api/#ktoolbox.job.JobRunner.finished","title":"<code>finished</code>  <code>property</code>","text":"<p>Check if all jobs finished</p> <p>Returns:</p> Type Description <p><code>False</code> if in process, <code>False</code> otherwise</p>"},{"location":"api/#ktoolbox.job.JobRunner.processing_size","title":"<code>processing_size: int</code>  <code>property</code>","text":"<p>Get the number of jobs that in process</p>"},{"location":"api/#ktoolbox.job.JobRunner.waiting_size","title":"<code>waiting_size: int</code>  <code>property</code>","text":"<p>Get the number of jobs waiting to be processed</p>"},{"location":"api/#ktoolbox.job.JobRunner.__init__","title":"<code>__init__(*, job_list=None, tqdm_class=None, progress=True)</code>","text":"<p>Create a job runner</p> <p>Parameters:</p> Name Type Description Default <code>job_list</code> <code>List[Job]</code> <p>Jobs to initial <code>self._job_queue</code></p> <code>None</code> <code>tqdm_class</code> <code>tqdm</code> <p><code>tqdm</code> class to replace default <code>tqdm.asyncio.tqdm</code></p> <code>None</code> <code>progress</code> <code>bool</code> <p>Show progress bar</p> <code>True</code>"},{"location":"api/#ktoolbox.job.JobRunner.add_jobs","title":"<code>add_jobs(*jobs)</code>  <code>async</code>","text":"<p>Add jobs to <code>self._job_queue</code></p>"},{"location":"api/#ktoolbox.job.JobRunner.cancel_downloader","title":"<code>cancel_downloader(target)</code>  <code>async</code>","text":"<p>Cancel downloader</p> <p>Returns:</p> Type Description <code>bool</code> <p>Whether cancelled successfully</p>"},{"location":"api/#ktoolbox.job.JobRunner.processor","title":"<code>processor()</code>  <code>async</code>","text":"<p>Process each job in <code>self._job_queue</code></p> <p>Returns:</p> Type Description <code>int</code> <p>Number of jobs that failed</p>"},{"location":"api/#ktoolbox.job.JobRunner.start","title":"<code>start()</code>  <code>async</code>","text":"<p>Start processing jobs concurrently</p> <p>It will Block until other call of <code>self.start()</code> method finished</p>"},{"location":"api/#ktoolbox.job.model","title":"<code>model</code>","text":""},{"location":"api/#ktoolbox.job.model.__all__","title":"<code>__all__ = ['Job', 'JobListData', 'CreatorIndices']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.job.model.CreatorIndices","title":"<code>CreatorIndices</code>","text":"<p>               Bases: <code>BaseKToolBoxData</code></p> <p>Creator directory indices model</p> <p>Record the path of each downloaded post.</p>"},{"location":"api/#ktoolbox.job.model.CreatorIndices.creator_id","title":"<code>creator_id: str</code>  <code>instance-attribute</code>","text":"<p>Creator ID</p>"},{"location":"api/#ktoolbox.job.model.CreatorIndices.posts","title":"<code>posts: Dict[str, Post] = {}</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>All posts, <code>id</code> -&gt; <code>Post</code></p>"},{"location":"api/#ktoolbox.job.model.CreatorIndices.posts_path","title":"<code>posts_path: Dict[str, Path] = {}</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>Posts and their path, <code>id</code> -&gt; <code>Path</code></p>"},{"location":"api/#ktoolbox.job.model.CreatorIndices.service","title":"<code>service: str</code>  <code>instance-attribute</code>","text":"<p>Creator service</p>"},{"location":"api/#ktoolbox.job.model.Job","title":"<code>Job</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Download job model</p>"},{"location":"api/#ktoolbox.job.model.Job.alt_filename","title":"<code>alt_filename: Optional[str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>Use this name if no filename given by the server</p>"},{"location":"api/#ktoolbox.job.model.Job.path","title":"<code>path: Path</code>  <code>instance-attribute</code>","text":"<p>Directory path to save the file</p>"},{"location":"api/#ktoolbox.job.model.Job.post","title":"<code>post: Optional[Post] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>Post object</p>"},{"location":"api/#ktoolbox.job.model.Job.server_path","title":"<code>server_path: str</code>  <code>instance-attribute</code>","text":"<p>The <code>path</code> part of download URL</p>"},{"location":"api/#ktoolbox.job.model.Job.type","title":"<code>type: Optional[Literal[PostFileTypeEnum.Attachment, PostFileTypeEnum.File]] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>Target file type</p>"},{"location":"api/#ktoolbox.job.model.JobListData","title":"<code>JobListData</code>","text":"<p>               Bases: <code>BaseKToolBoxData</code></p> <p>Download job list data model</p> <p>For saving the list of jobs to disk.</p>"},{"location":"api/#ktoolbox.job.model.JobListData.jobs","title":"<code>jobs: List[Job] = []</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>All jobs</p>"},{"location":"api/#ktoolbox.job.runner","title":"<code>runner</code>","text":""},{"location":"api/#ktoolbox.job.runner.__all__","title":"<code>__all__ = ['JobRunner']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.job.runner.JobRunner","title":"<code>JobRunner</code>","text":""},{"location":"api/#ktoolbox.job.runner.JobRunner.done_size","title":"<code>done_size: int</code>  <code>property</code>","text":"<p>Get the number of jobs that done</p>"},{"location":"api/#ktoolbox.job.runner.JobRunner.downloaders","title":"<code>downloaders</code>  <code>cached</code> <code>property</code>","text":"<p>Get downloaders with task</p>"},{"location":"api/#ktoolbox.job.runner.JobRunner.finished","title":"<code>finished</code>  <code>property</code>","text":"<p>Check if all jobs finished</p> <p>Returns:</p> Type Description <p><code>False</code> if in process, <code>False</code> otherwise</p>"},{"location":"api/#ktoolbox.job.runner.JobRunner.processing_size","title":"<code>processing_size: int</code>  <code>property</code>","text":"<p>Get the number of jobs that in process</p>"},{"location":"api/#ktoolbox.job.runner.JobRunner.waiting_size","title":"<code>waiting_size: int</code>  <code>property</code>","text":"<p>Get the number of jobs waiting to be processed</p>"},{"location":"api/#ktoolbox.job.runner.JobRunner.__init__","title":"<code>__init__(*, job_list=None, tqdm_class=None, progress=True)</code>","text":"<p>Create a job runner</p> <p>Parameters:</p> Name Type Description Default <code>job_list</code> <code>List[Job]</code> <p>Jobs to initial <code>self._job_queue</code></p> <code>None</code> <code>tqdm_class</code> <code>tqdm</code> <p><code>tqdm</code> class to replace default <code>tqdm.asyncio.tqdm</code></p> <code>None</code> <code>progress</code> <code>bool</code> <p>Show progress bar</p> <code>True</code>"},{"location":"api/#ktoolbox.job.runner.JobRunner.add_jobs","title":"<code>add_jobs(*jobs)</code>  <code>async</code>","text":"<p>Add jobs to <code>self._job_queue</code></p>"},{"location":"api/#ktoolbox.job.runner.JobRunner.cancel_downloader","title":"<code>cancel_downloader(target)</code>  <code>async</code>","text":"<p>Cancel downloader</p> <p>Returns:</p> Type Description <code>bool</code> <p>Whether cancelled successfully</p>"},{"location":"api/#ktoolbox.job.runner.JobRunner.processor","title":"<code>processor()</code>  <code>async</code>","text":"<p>Process each job in <code>self._job_queue</code></p> <p>Returns:</p> Type Description <code>int</code> <p>Number of jobs that failed</p>"},{"location":"api/#ktoolbox.job.runner.JobRunner.start","title":"<code>start()</code>  <code>async</code>","text":"<p>Start processing jobs concurrently</p> <p>It will Block until other call of <code>self.start()</code> method finished</p>"},{"location":"api/#ktoolbox.model","title":"<code>model</code>","text":""},{"location":"api/#ktoolbox.model.__all__","title":"<code>__all__ = ['BaseKToolBoxData', 'SearchResult']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.model.BaseKToolBoxData","title":"<code>BaseKToolBoxData</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Base class for all KToolBox data models.</p>"},{"location":"api/#ktoolbox.model.BaseKToolBoxData.type","title":"<code>type: Union[Type[BaseKToolBoxData], str] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.model.BaseKToolBoxData.version","title":"<code>version: str = __version__</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.model.BaseKToolBoxData._","title":"<code>_(value, _info)</code>","text":""},{"location":"api/#ktoolbox.model.BaseKToolBoxData.__init__","title":"<code>__init__(**data)</code>","text":""},{"location":"api/#ktoolbox.model.SearchResult","title":"<code>SearchResult</code>","text":"<p>               Bases: <code>BaseKToolBoxData</code>, <code>Generic[_T]</code></p> <p>Cli search result</p>"},{"location":"api/#ktoolbox.model.SearchResult.result","title":"<code>result: List[_T] = []</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.utils","title":"<code>utils</code>","text":""},{"location":"api/#ktoolbox.utils.__all__","title":"<code>__all__ = ['BaseRet', 'generate_msg', 'logger_init', 'dump_search', 'parse_webpage_url', 'uvloop_init', 'extract_external_links']</code>  <code>module-attribute</code>","text":""},{"location":"api/#ktoolbox.utils.BaseRet","title":"<code>BaseRet</code>","text":"<p>               Bases: <code>BaseModel</code>, <code>Generic[_T]</code></p> <p>Base data model of function return value</p>"},{"location":"api/#ktoolbox.utils.BaseRet.code","title":"<code>code: int = RetCodeEnum.Success.value</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.utils.BaseRet.data","title":"<code>data: Optional[_T] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.utils.BaseRet.exception","title":"<code>exception: Optional[Exception] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.utils.BaseRet.message","title":"<code>message: str = ''</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.utils.BaseRet.model_config","title":"<code>model_config = ConfigDict(arbitrary_types_allowed=True)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/#ktoolbox.utils.BaseRet.__bool__","title":"<code>__bool__()</code>","text":""},{"location":"api/#ktoolbox.utils.dump_search","title":"<code>dump_search(result, path)</code>  <code>async</code>","text":""},{"location":"api/#ktoolbox.utils.extract_external_links","title":"<code>extract_external_links(content, custom_patterns=None)</code>","text":"<p>Extract external file sharing links from text content.</p> <p>Targets common cloud storage and file sharing services like: - Google Drive - MEGA - Dropbox - OneDrive - MediaFire - And other common file hosting services</p> <p>Parameters:</p> Name Type Description Default <code>content</code> <code>str</code> <p>Text content to extract links from</p> required <code>custom_patterns</code> <code>Optional[List[str]]</code> <p>Custom regex patterns to use.</p> <code>None</code> <p>Returns:</p> Type Description <code>Set[str]</code> <p>Set of unique external links found</p>"},{"location":"api/#ktoolbox.utils.generate_msg","title":"<code>generate_msg(title=None, **kwargs)</code>","text":"<p>Generate message for <code>BaseRet</code> and logger</p> <p>Parameters:</p> Name Type Description Default <code>title</code> <code>str</code> <p>Message title</p> <code>None</code> <code>kwargs</code> <p>Extra data</p> <code>{}</code>"},{"location":"api/#ktoolbox.utils.logger_init","title":"<code>logger_init(cli_use=False, disable_stdout=False)</code>","text":"<p>Initialize <code>loguru</code> logger</p> <p>Parameters:</p> Name Type Description Default <code>cli_use</code> <code>bool</code> <p>Set logger level <code>INFO</code> and filter out <code>SUCCESS</code></p> <code>False</code> <code>disable_stdout</code> <code>bool</code> <p>Disable default output stream</p> <code>False</code>"},{"location":"api/#ktoolbox.utils.parse_webpage_url","title":"<code>parse_webpage_url(url)</code>","text":"<p>Fetch service, user_id, post_id, revision_id from webpage url</p> <p>Each part can be <code>None</code> if not found in url.</p> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>Kemono Webpage url</p> required <p>Returns:</p> Type Description <code>Tuple[Optional[str], Optional[str], Optional[str], Optional[str]]</code> <p>Tuple of service, user_id, post_id, revision_id</p>"},{"location":"api/#ktoolbox.utils.uvloop_init","title":"<code>uvloop_init()</code>","text":"<p>Set event loop policy to uvloop or winloop if available.</p> <p>Uses winloop on Windows and uvloop on Unix-like systems for performance optimization.</p> <p>Returns:</p> Type Description <code>bool</code> <p>If event loop policy was set successfully</p>"},{"location":"coomer/","title":"Coomer","text":"<p>KToolBox support downloading from Coomer.st / Coomer.su / Coomer.party</p> <p>You need to modify the configuration by <code>.env</code> or <code>prod.env</code> dotenv file or system environment variables: <pre><code># For Coomer API\nKTOOLBOX_API__NETLOC=coomer.st\n\n# For downloading files from Coomer server\nKTOOLBOX_API__FILES_NETLOC=coomer.st\n</code></pre></p>"},{"location":"coomer/#about-coomer","title":"About Coomer","text":"<p>Description from https://coomer.st :</p> <p>Coomer is a public archiver for:</p> <ul> <li>OnlyFans</li> <li>Fansly</li> </ul> <p>Contributors here upload content and share it here for easy searching and organization. To get started viewing content, either search for creators on the creators page, or search for content on the posts page. If you want to contribute content, head over to the import page.</p>"},{"location":"faq/","title":"FAQ","text":""},{"location":"faq/#how-to-solve-the-failure-of-uvloopwinloop-installation","title":"How to solve the failure of uvloop/winloop installation?","text":"<p>It's optional</p> <p>Event loop optimization (uvloop/winloop) can improve concurrent performance, but it's optional.  If you don't want to install these packages, you can ignore this step.</p> <p>KToolBox now supports platform-specific event loop optimization:</p> <ul> <li>Windows: Uses <code>winloop</code> for improved performance</li> <li>Linux/macOS: Uses <code>uvloop</code> for improved performance</li> </ul>"},{"location":"faq/#installing-event-loop-optimizations","title":"Installing event loop optimizations","text":"WindowsLinux/macOS <pre><code>pip install ktoolbox[winloop]\n</code></pre> <pre><code>pip install ktoolbox[uvloop]\n</code></pre> <p>If you failed installing uvloop on Linux or macOS, you can try to install it with system package manager like apt, yum or brew, as package managers provide prebuilt wheels for uvloop.</p> <ul> <li>Install with apt     <pre><code>sudo apt install python3-uvloop\n</code></pre></li> </ul>"},{"location":"faq/#attachments-folder-inside-post-directory-is-no-need-for-me","title":"<code>attachments</code> folder inside post directory is no need for me","text":"<p>You can set configuration option <code>job.post_structure.attachments</code> to <code>./</code></p> <p>Set the configuration by <code>prod.env</code> dotenv file or system environment variables: <pre><code>KTOOLBOX_JOB__POST_STRUCTURE__ATTACHMENTS=./\n</code></pre></p> <p><code>./</code> means attachments will be downloaded directly into the post directory.</p> <p>Notice</p> <p>For more information, please visit Configuration-Guide page.</p>"},{"location":"faq/#commands-and-flags-should-use-or-_-as-seperator","title":"Commands and flags should use <code>-</code> or <code>_</code> as seperator?","text":"<p>Both is support, <code>-</code> is suggested.</p>"},{"location":"faq/#filename-too-long","title":"Filename too long","text":"<p>In some cases, the filename or the post directory name can be too long and caused download failure. To solve this issue, you can set sequential filename or use custom post directory name</p> <p>Set the configuration by <code>prod.env</code> dotenv file or system environment variables: <pre><code># Rename attachments in numerical order, e.g. `1.png`, `2.png`, ...\nKTOOLBOX_JOB__SEQUENTIAL_FILENAME=True\n\n# Set the post directory name to its release/publish date and ID, e.g. `[2024-1-1]11223344`\nKTOOLBOX_JOB__POST_DIRNAME_FORMAT=[{published}]{id}\n</code></pre></p>"},{"location":"faq/#how-to-configure-a-proxy","title":"How to Configure a Proxy?","text":"<p>You can set the <code>HTTPS_PROXY</code>, <code>HTTP_PROXY</code>, and <code>ALL_PROXY</code> environment variables to achieve this.</p> <p>Refer to: HTTPX - Environment Variables</p> <p>For example, set it like this:</p> <pre><code># Unix Shell\nexport HTTPS_PROXY=http://127.0.0.1:7897\nexport HTTP_PROXY=http://127.0.0.1:7897\nexport ALL_PROXY=socks5://127.0.0.1:7897\n</code></pre> <pre><code># Windows PowerShell\n$env:HTTP_PROXY=\"http://127.0.0.1:7897\"; $env:HTTPS_PROXY=\"http://127.0.0.1:7897\"\n</code></pre>"},{"location":"faq/#gui-configuration-editor-cannot-be-opened","title":"GUI Configuration Editor Cannot Be Opened","text":"<p>Note</p> <p><code>ktoolbox-pure-py</code> does not support the graphical configuration editor.</p> <p>By default, the dependencies for the graphical configuration editor are not installed. You can install them using the following command:</p> <pre><code>pip3 install ktoolbox[urwid]\n</code></pre> <p>If you are using pipx:</p> <pre><code>pipx install ktoolbox[urwid] --force\n</code></pre>"},{"location":"faq/#kemono-api-call-failed","title":"Kemono API Call Failed","text":"<p>For example:</p> <pre><code>ktoolbox sync-creator \"https://coomer.su/onlyfans/user/hollyharper11\" --start-time=\"2020-05-01\" --end-time=\"2025-01-01\"\n\n2024-05-12 12:52:51.477 | INFO     | ktoolbox.cli:sync_creator:271 - Got creator information - {'name': 'hollyharper11', 'id': 'hollyharper11'}\n2024-05-12 12:52:51.479 | INFO     | ktoolbox.action.job:create_job_from_creator:148 - Start fetching posts from creator hollyharper11\n2024-05-12 12:52:56.477 | ERROR    | ktoolbox.api.base:_retry_error_callback:37 - Kemono API call failed - {'ret': APIRet(code=1002, message=\"1 validation error for Response\\n  Invalid JSON: expected value at line 1 column 1 [type=json_invalid, input_value='&lt;!DOCTYPE html&gt;\\\\n&lt;html&gt;\\\\...&gt;\\\\n  &lt;/body&gt;\\\\n&lt;/html&gt;\\\\n', input_type=str]\\n    For further information visit https://errors.pydantic.dev/2.7/v/json_invalid\", exception=1 validation error for Response\n  Invalid JSON: expected value at line 1 column 1 [type=json_invalid, input_value='&lt;!DOCTYPE html&gt;\\n&lt;html&gt;\\...&gt;\\n  &lt;/body&gt;\\n&lt;/html&gt;\\n', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/json_invalid, data=None)}\n1 validation error for Response\n  Invalid JSON: expected value at line 1 column 1 [type=json_invalid, input_value='&lt;!DOCTYPE html&gt;\\n&lt;html&gt;\\...&gt;\\n  &lt;/body&gt;\\n&lt;/html&gt;\\n', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/json_invalid\n</code></pre> <ol> <li> <p>This is generally caused by frequent requests, so you can try setting a higher number of API retry attempts.     <pre><code># .env / prod.env\nKTOOLBOX_API__RETRY_TIMES=10\n</code></pre></p> </li> <li> <p>You can set session key (can be found in cookies after a successful login) for download     <pre><code># .env / prod.env\nKTOOLBOX_API__SESSION_KEY=\"xxxxxxx\"\n</code></pre></p> </li> </ol> <p>You can also set these through the graphical configuration editor: <code>API - retry_times</code> and <code>API -&gt; session_key</code>.</p>"},{"location":"faq/#frequently-encounter-403-errors-during-downloads","title":"Frequently encounter 403 errors during downloads","text":"<p>The solution is the same as above.</p>"},{"location":"faq/#others","title":"Others","text":"<p>A community-shared usage guide: #141</p>"},{"location":"more/","title":"More","text":""},{"location":"more/#other-branches","title":"Other Branches","text":"<ul> <li>Pure Python branch: \ud83d\udd17pure-py</li> </ul> <p>About</p> <ul> <li>Use pydantic v1 so that cargo is not needed for installation</li> <li>For example, you can use it on iOS terminal App a-Shell</li> <li>\ud83d\udd17PyPI</li> </ul> <ul> <li>Development branch: \ud83d\udd17devel</li> </ul>"},{"location":"more/#code-coverage","title":"Code Coverage","text":""},{"location":"more/#license","title":"License","text":"<p>KToolBox is licensed under BSD 3-Clause.</p> <p>Copyright \u00a9 2023 by Ljzd-PRO.</p>"},{"location":"shortcut/","title":"Shortcuts for iOS","text":"<p>You can run KToolBox using iOS terminal App a-Shell, and the following shortcuts  can help you automatically install KToolBox and download posts</p>"},{"location":"shortcut/#get-the-shortcuts","title":"Get the shortcuts","text":"<p>Visit shortcut URLs below or download shortcut files at <code>shortcuts/</code></p>"},{"location":"shortcut/#english","title":"English","text":"<ul> <li>KToolBox Manager</li> <li>Download Kemono Post</li> </ul>"},{"location":"shortcut/#chinese","title":"Chinese","text":"<ul> <li>KToolBox \u7ba1\u7406\u5668</li> <li>\u4e0b\u8f7d Kemono \u4f5c\u54c1</li> </ul>"},{"location":"shortcut/#usage","title":"Usage","text":"<ul> <li>Use \"KToolBox Manager\" to install, update, uninstall KToolBox in a-Shell</li> <li>You can trigger \"Download Kemono Post\" by web page share view, or run directly in Shortcuts App</li> </ul>"},{"location":"commands/guide/","title":"Guide","text":"<p>Check Reference for all commands and their flags / parameters.</p>"},{"location":"commands/guide/#get-general-help","title":"Get general help","text":"<ul> <li><code>--help</code>, <code>-h</code></li> </ul> <pre><code>ktoolbox -h\n</code></pre>"},{"location":"commands/guide/#get-help-of-a-command","title":"Get help of a command","text":"<ul> <li><code>--help</code>, <code>-h</code></li> </ul> <pre><code>ktoolbox download-post -h\n</code></pre>"},{"location":"commands/guide/#launch-the-graphical-configuration-editor","title":"Launch the graphical configuration editor","text":"<p><code>config-editor</code></p> <pre><code>ktoolbox config-editor\n</code></pre>"},{"location":"commands/guide/#generate-an-example-configuration-file-envprodenv","title":"Generate an example configuration file (<code>.env</code>/<code>prod.env</code>)","text":"<p><code>example-env</code></p> <pre><code>ktoolbox example-env\n</code></pre>"},{"location":"commands/guide/#download-a-specific-post","title":"Download a specific post","text":"<p><code>download-post</code></p> <pre><code>ktoolbox download-post https://kemono.su/fanbox/user/49494721/post/6608808\n</code></pre> If some files failed to download <p>If some files failed to download, you can try to execute the command line again,  the downloaded files will be skipped.</p>"},{"location":"commands/guide/#download-all-posts-from-a-creator","title":"Download all posts from a creator","text":"<p><code>sync-creator</code></p> <pre><code># Download all posts of the creator/artist\nktoolbox sync-creator https://kemono.su/fanbox/user/9016\n</code></pre> About <code>creator-indices.ktoolbox</code> file <p>By default, you will get a <code>creator-indices.ktoolbox</code> file in the creator directory,  it contains the information and filepath of posts inside the directory.</p> Update creator directory <p>You can rerun the command, files with the same filename will be skipped.</p>"},{"location":"commands/guide/#download-a-specified-number-of-posts-from-the-creator","title":"Download a specified number of posts from the creator","text":"<p><code>sync-creator</code></p> <ul> <li><code>--offset</code>: Posts result offset (or start offset)</li> <li><code>--length</code>: The number of posts to fetch, defaults to fetching all posts</li> </ul> <pre><code># Download latest 10 posts of the creator/artist\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --length=10\n\n# Download latest No.11-No.15 posts of the creator/artist\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --offset=10 --length=5\n</code></pre>"},{"location":"commands/guide/#download-posts-that-published-within-the-specified-time-range","title":"Download posts that published within the specified time range","text":"<p><code>sync-creator</code></p> <ul> <li><code>--start-time</code>: Start time of the published time range for posts downloading.</li> <li><code>--end-time</code>: End time of the published time range for posts downloading.</li> </ul> <pre><code># From 2023-8-5 to 2023-12-6\nktoolbox sync-creator https://kemono.su/fanbox/user/641955 --start-time=2023-8-5 --end-time=2023-12-6\n\n# From 2023-8-5 to now\nktoolbox sync-creator https://kemono.su/fanbox/user/641955 --start-time=2023-8-5\n\n# Before 2023-8-5\nktoolbox sync-creator https://kemono.su/fanbox/user/641955 --end-time=2023-8-5\n</code></pre>"},{"location":"commands/guide/#time-format","title":"Time Format","text":"<p>The time value should match <code>%Y-%m-%d</code>, for example:</p> <ul> <li><code>2023-12-7</code></li> <li><code>2023-12-07</code></li> <li><code>2023-12-31</code></li> </ul>"},{"location":"commands/reference/","title":"Reference","text":""},{"location":"commands/reference/#ktoolbox.cli.KToolBoxCli.config_editor","title":"<code>config_editor</code>","text":"<p>Launch graphical KToolBox configuration editor</p>"},{"location":"commands/reference/#ktoolbox.cli.KToolBoxCli.download_post","title":"<code>download_post</code>","text":"<p>Download a specific post or revision</p> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>The post URL</p> <code>None</code> <code>service</code> <code>str</code> <p>The service name</p> <code>None</code> <code>creator_id</code> <code>str</code> <p>The creator's ID</p> <code>None</code> <code>post_id</code> <code>str</code> <p>The post ID</p> <code>None</code> <code>revision_id</code> <code>str</code> <p>The revision ID (optional, for revision posts)</p> <code>None</code> <code>path</code> <code>Union[Path, str]</code> <p>Download path, default is current directory</p> <code>Path('.')</code> <code>dump_post_data</code> <p>Whether to dump post data (post.json) in post directory</p> <code>True</code>"},{"location":"commands/reference/#ktoolbox.cli.KToolBoxCli.example_env","title":"<code>example_env</code>","text":"<p>Generate an example configuration <code>.env</code> file.</p>"},{"location":"commands/reference/#ktoolbox.cli.KToolBoxCli.get_post","title":"<code>get_post</code>","text":"<p>Get a specific post or revision</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service name</p> required <code>creator_id</code> <code>str</code> <p>The creator's ID</p> required <code>post_id</code> <code>str</code> <p>The post ID</p> required <code>revision_id</code> <code>str</code> <p>The revision ID (optional, for revision posts)</p> <code>None</code> <code>dump</code> <code>Path</code> <p>Dump the result to a JSON file</p> <code>None</code>"},{"location":"commands/reference/#ktoolbox.cli.KToolBoxCli.search_creator","title":"<code>search_creator</code>","text":"<p>Search creator, you can use multiple parameters as keywords.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code> <code>dump</code> <code>Path</code> <p>Dump the result to a JSON file</p> <code>None</code>"},{"location":"commands/reference/#ktoolbox.cli.KToolBoxCli.search_creator_post","title":"<code>search_creator_post</code>","text":"<p>Search posts from creator, you can use multiple parameters as keywords.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code> <code>q</code> <code>str</code> <p>Search query</p> <code>None</code> <code>o</code> <code>int</code> <p>Result offset, stepping of 50 is enforced</p> <code>None</code> <code>dump</code> <code>Path</code> <p>Dump the result to a JSON file</p> <code>None</code>"},{"location":"commands/reference/#ktoolbox.cli.KToolBoxCli.site_version","title":"<code>site_version</code>","text":"<p>Show current Kemono site app commit hash</p>"},{"location":"commands/reference/#ktoolbox.cli.KToolBoxCli.sync_creator","title":"<code>sync_creator</code>","text":"<p>Sync posts from a creator</p> <p>You can update the directory anytime after download finished,         such as to update after creator published new posts.</p> <ul> <li><code>start_time</code> &amp; <code>end_time</code> example: <code>2023-12-7</code>, <code>2023-12-07</code></li> </ul> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>The post URL</p> <code>None</code> <code>service</code> <code>str</code> <p>The service where the post is located</p> <code>None</code> <code>creator_id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>path</code> <code>Union[Path, str]</code> <p>Download path, default is current directory</p> <code>Path('.')</code> <code>save_creator_indices</code> <code>bool</code> <p>Record <code>CreatorIndices</code> data</p> <code>False</code> <code>mix_posts</code> <code>bool</code> <p>Save all_pages files from different posts at same path,             <code>save_creator_indices</code> will be ignored if enabled</p> <code>None</code> <code>start_time</code> <code>str</code> <p>Start time of the published time range for posts downloading.             Set to <code>0</code> if <code>None</code> was given.             Time format: <code>%Y-%m-%d</code></p> <code>None</code> <code>end_time</code> <code>str</code> <p>End time of the published time range for posts downloading.             Set to latest time (infinity) if <code>None</code> was given.             Time format: <code>%Y-%m-%d</code></p> <code>None</code> <code>offset</code> <code>int</code> <p>Result offset (or start offset)</p> <code>0</code> <code>length</code> <code>int</code> <p>The number of posts to fetch, defaults to fetching all posts after <code>offset</code>.</p> <code>None</code> <code>keywords</code> <code>str</code> <p>Comma-separated keywords to filter posts by title (case-insensitive)</p> <code>None</code>"},{"location":"commands/reference/#ktoolbox.cli.KToolBoxCli.version","title":"<code>version</code>","text":"<p>Show KToolBox version</p>"},{"location":"configuration/guide/","title":"Guide","text":"<p>Graphical Configuration Editor</p> UsageScreenshot <p>Run <code>ktoolbox config-editor</code> to launch,  it will make configuration editing simple and convenient.</p> <ul> <li>Press <code>&lt;Esc&gt;</code> for back, <code>&lt;Enter&gt;</code> for select</li> <li>You can also use the GUI with the mouse</li> </ul> <p> </p> <p>Generate Example <code>.env</code> File</p> <p>Run <code>ktoolbox example-env</code> to generate a complete sample configuration file.</p> <ul> <li>KToolBox load <code>.env</code> or <code>prod.env</code> file in the working directory or environment variables to store configuration</li> <li>The working directory refers to the directory where you execute the <code>ktoolbox</code> command, it is not necessarily the directory where the <code>ktoolbox</code> executable is located. It reads from where you execute it.</li> <li>Check Reference for all configuration options</li> <li>Use <code>__</code> to specify the sub option, like <code>KTOOLBOX_API__SCHEME</code> means <code>api.scheme</code></li> <li>All configuration options are optional</li> </ul>"},{"location":"configuration/guide/#env-prodenv-file-example","title":"<code>.env</code> / <code>prod.env</code> file example","text":"<pre><code>##############################################################################\n#  It is recommended to use the graphical configuration editor for editing.  #\n#  Run `ktoolbox config-editor` to launch it.                                #\n##############################################################################\n\n# (Optional) Session key that can be found in cookies after a successful login\n# Use when 403 Error\n#KTOOLBOX_API__SESSION_KEY=xxxxx\n\n# Download 10 files at the same time.\nKTOOLBOX_JOB__COUNT=10\n\n# Set post attachments directory path as `./`, it means to save all attachments files in post directory\n# without making a new sub directory to storage them\nKTOOLBOX_JOB__POST_STRUCTURE__ATTACHMENTS=./\n\n# Rename attachments in numerical order, e.g. `1.png`, `2.png`, ...\nKTOOLBOX_JOB__SEQUENTIAL_FILENAME=True\n\n# Customize the filename format by inserting an empty `{}` to represent the basic filename.\n# Similar to `post_dirname_format`, you can use some of the properties in `Post`.\n# For example: `{title}_{}` &gt; `HelloWorld_b4b41de2-8736-480d-b5c3-ebf0d917561b`, etc.\n# You can also use it with `sequential_filename`. For instance,\n# `[{published}]_{}` &gt; `[2024-1-1]_1.png`, `[2024-1-1]_2.png`, etc.\nKTOOLBOX_JOB__FILENAME_FORMAT=[{published}]_{title}_{id}_{}\n\n# Prefix the post directory name with its release/publish date, e.g. `[2024-1-1]HelloWorld`\nKTOOLBOX_JOB__POST_DIRNAME_FORMAT=[{published}]{title}\n</code></pre>"},{"location":"configuration/reference/","title":"Reference","text":""},{"location":"configuration/reference/#ktoolbox.configuration.Configuration","title":"<code>Configuration</code>","text":"<p>KToolBox Configuration</p> <p>Attributes:</p> Name Type Description Default Value <code>api</code> <code>APIConfiguration</code> <p>Kemono API Configuration</p> <code>                       APIConfiguration()               </code> <code>downloader</code> <code>DownloaderConfiguration</code> <p>File Downloader Configuration</p> <code>                       DownloaderConfiguration()               </code> <code>job</code> <code>JobConfiguration</code> <p>Download jobs Configuration</p> <code>                       JobConfiguration()               </code> <code>logger</code> <code>LoggerConfiguration</code> <p>Logger configuration</p> <code>                       LoggerConfiguration()               </code> <code>ssl_verify</code> <code>bool</code> <p>Enable SSL certificate verification for Kemono API server and download server</p> <code>                       True               </code> <code>json_dump_indent</code> <code>int</code> <p>Indent of JSON file dump</p> <code>                       4               </code> <code>use_uvloop</code> <code>bool</code> <p>Use uvloop/winloop for asyncio performance optimization     Uses winloop on Windows and uvloop on Unix-like systems for better concurrent performance.     Install winloop on Windows with <code>pip install ktoolbox[winloop]</code>     or uvloop on Unix with <code>pip install ktoolbox[uvloop]</code>.</p> <code>                       True               </code>"},{"location":"configuration/reference/#ktoolbox.configuration.APIConfiguration","title":"<code>APIConfiguration</code>","text":"<p>Kemono API Configuration</p> <p>Attributes:</p> Name Type Description Default Value <code>scheme</code> <code>Literal['http', 'https']</code> <p>Kemono API URL scheme</p> <code>                       'https'               </code> <code>netloc</code> <code>str</code> <p>Kemono API URL netloc</p> <code>                       'kemono.cr'               </code> <code>statics_netloc</code> <code>str</code> <p>URL netloc of Kemono server for static files (e.g. images)</p> <code>                       'img.kemono.cr'               </code> <code>files_netloc</code> <code>str</code> <p>URL netloc of Kemono server for post files</p> <code>                       'kemono.cr'               </code> <code>path</code> <code>str</code> <p>Kemono API URL root path</p> <code>                       '/api/v1'               </code> <code>timeout</code> <code>float</code> <p>API request timeout</p> <code>                       5.0               </code> <code>retry_times</code> <code>int</code> <p>API request retry times (when request failed)</p> <code>                       3               </code> <code>retry_interval</code> <code>float</code> <p>Seconds of API request retry interval</p> <code>                       2.0               </code> <code>session_key</code> <code>str</code> <p>Session key that can be found in cookies after a successful login</p> <code>                       ''               </code>"},{"location":"configuration/reference/#ktoolbox.configuration.DownloaderConfiguration","title":"<code>DownloaderConfiguration</code>","text":"<p>File Downloader Configuration</p> <p>Attributes:</p> Name Type Description Default Value <code>scheme</code> <code>Literal['http', 'https']</code> <p>Downloader URL scheme</p> <code>                       'https'               </code> <code>timeout</code> <code>float</code> <p>Downloader request timeout</p> <code>                       30.0               </code> <code>encoding</code> <code>str</code> <p>Charset for filename parsing and post content text saving</p> <code>                       'utf-8'               </code> <code>buffer_size</code> <code>int</code> <p>Number of bytes of file I/O buffer for each downloading file</p> <code>                       20480               </code> <code>chunk_size</code> <code>int</code> <p>Number of bytes of chunk of downloader stream</p> <code>                       1024               </code> <code>temp_suffix</code> <code>str</code> <p>Temp filename suffix of downloading files</p> <code>                       'tmp'               </code> <code>retry_times</code> <code>int</code> <p>Downloader retry times (when download failed)</p> <code>                       10               </code> <code>retry_stop_never</code> <code>bool</code> <p>Never stop downloader from retrying (when download failed)     (<code>retry_times</code> will be ignored when enabled)</p> <code>                       False               </code> <code>retry_interval</code> <code>float</code> <p>Seconds of downloader retry interval</p> <code>                       3.0               </code> <code>tps_limit</code> <code>float</code> <p>Maximum connections established per second</p> <code>                       1.0               </code> <code>use_bucket</code> <code>bool</code> <p>Enable local storage bucket mode</p> <code>                       False               </code> <code>bucket_path</code> <code>Path</code> <p>Path of local storage bucket</p> <code>                       Path('./.ktoolbox/bucket_storage')               </code> <code>reverse_proxy</code> <code>str</code> <p>Reverse proxy format for download URL.     Customize the filename format by inserting an empty <code>{}</code> to represent the original URL.     For example: <code>https://example.com/{}</code> will be <code>https://example.com/https://n1.kemono.su/data/66/83/xxxxx.jpg</code>;      <code>https://example.com/?url={}</code> will be <code>https://example.com/?url=https://n1.kemono.su/data/66/83/xxxxx.jpg</code></p> <code>                       '{}'               </code>"},{"location":"configuration/reference/#ktoolbox.configuration.PostStructureConfiguration","title":"<code>PostStructureConfiguration</code>","text":"<p>Post path structure model</p> <ul> <li> <p>Default: <pre><code>..\n\u251c\u2500 content.txt\n\u251c\u2500 external_links.txt\n\u251c\u2500 {id}_{}.png (file)\n\u251c\u2500 post.json (metadata)\n\u251c\u2500 attachments\n\u2502    \u251c\u2500 1.png\n\u2502    \u2514\u2500 2.png\n\u2514\u2500 revisions\n     \u251c\u2500 &lt;PostStructure&gt;\n     \u2502    \u251c\u2500 ...\n     \u2502    \u2514\u2500 ...\n     \u2514\u2500 &lt;PostStructure&gt;\n          \u251c\u2500 ...\n          \u2514\u2500 ...\n</code></pre></p> </li> <li> <p>Available properties for <code>file</code></p> Property Type <code>id</code> String <code>user</code> String <code>service</code> String <code>title</code> String <code>added</code> Date <code>published</code> Date <code>edited</code> Date </li> </ul> <p>Attributes:</p> Name Type Description Default Value <code>attachments</code> <code>Path</code> <p>Sub path of attachment directory</p> <code>                       Path('attachments')               </code> <code>content</code> <code>Path</code> <p>Sub path of post content file</p> <code>                       Path('content.txt')               </code> <code>external_links</code> <code>Path</code> <p>Sub path of external links file (for cloud storage links found in content)</p> <code>                       Path('external_links.txt')               </code> <code>file</code> <code>str</code> <p>The format of the post <code>file</code> filename (<code>file</code> is not <code>attachment</code>, each post has only one <code>file</code>, usually the cover image)     Customize the filename format by inserting an empty <code>{}</code> to represent the basic filename.     You can use some of the properties     in Post. For example: <code>{title}_{}</code> could result in filenames like     <code>TheTitle_Stelle_lv5_logo.gif</code>, <code>TheTitle_ScxHjZIdxt5cnjaAwf3ql2p7.jpg</code>, etc.</p> <code>                       '{id}_{}'               </code> <code>revisions</code> <code>Path</code> <p>Sub path of revisions directory</p> <code>                       Path('revisions')               </code>"},{"location":"configuration/reference/#ktoolbox.configuration.JobConfiguration","title":"<code>JobConfiguration</code>","text":"<p>Download jobs Configuration</p> <ul> <li> <p>Available properties for <code>post_dirname_format</code> and <code>filename_format</code></p> Property Type <code>id</code> String <code>user</code> String <code>service</code> String <code>title</code> String <code>added</code> Date <code>published</code> Date <code>edited</code> Date </li> </ul> <p>Attributes:</p> Name Type Description Default Value <code>count</code> <code>int</code> <p>Number of coroutines for concurrent download</p> <code>                       4               </code> <code>include_revisions</code> <code>bool</code> <p>Include and download revision posts when available</p> <code>                       False               </code> <code>post_dirname_format</code> <code>str</code> <p>Customize the post directory name format, you can use some of the     properties in <code>Post</code>.     e.g. <code>[{published}]{id}</code> &gt; <code>[2024-1-1]123123</code>, <code>{user}_{published}_{title}</code> &gt; <code>234234_2024-1-1_TheTitle</code></p> <code>                       '{title}'               </code> <code>post_structure</code> <code>PostStructureConfiguration</code> <p>Post path structure</p> <code>                       PostStructureConfiguration()               </code> <code>mix_posts</code> <code>bool</code> <p>Save all files from different posts at same path in creator directory.     It would not create any post directory, and <code>CreatorIndices</code> would not been recorded.</p> <code>                       False               </code> <code>sequential_filename</code> <code>bool</code> <p>Rename attachments in numerical order, e.g. <code>1.png</code>, <code>2.png</code>, ...</p> <code>                       False               </code> <code>sequential_filename_excludes</code> <code>Set[str]</code> <p>File extensions to exclude from sequential naming when <code>sequential_filename</code> is enabled.     Files with these extensions will keep their original names. e.g. <code>[\".psd\", \".zip\", \".mp4\"]</code></p> <code>                       Field(default_factory=set)               </code> <code>filename_format</code> <code>str</code> <p>Customize the filename format by inserting an empty <code>{}</code> to represent the basic filename. Similar to post_dirname_format, you can use some of the properties     in Post. For example: <code>{title}_{}</code> could result in filenames like     <code>TheTitle_b4b41de2-8736-480d-b5c3-ebf0d917561b</code>, <code>TheTitle_af349b25-ac08-46d7-98fb-6ce99a237b90</code>, etc.     You can also use it with <code>sequential_filename</code>. For instance,     <code>[{published}]_{}</code> could result in filenames like <code>[2024-1-1]_1.png</code>, <code>[2024-1-1]_2.png</code>, etc.</p> <code>                       '{}'               </code> <code>allow_list</code> <code>Set[str]</code> <p>Download files which match these patterns (Unix shell-style), e.g. <code>[\"*.png\"]</code></p> <code>                       Field(default_factory=set)               </code> <code>block_list</code> <code>Set[str]</code> <p>Not to download files which match these patterns (Unix shell-style), e.g. <code>[\"*.psd\",\"*.zip\"]</code></p> <code>                       Field(default_factory=set)               </code> <code>extract_external_links</code> <code>bool</code> <p>Extract external file sharing links from post content and save to separate file</p> <code>                       True               </code> <code>external_link_patterns</code> <code>List[str]</code> <p>Regex patterns for extracting external links.</p> <code>                       ['https?://drive\\\\.google\\\\.com/[^\\\\s]+', 'https?://docs\\\\.google\\\\.com/[^\\\\s]+', 'https?://mega\\\\.nz/[^\\\\s]+', 'https?://mega\\\\.co\\\\.nz/[^\\\\s]+', 'https?://(?:www\\\\.)?dropbox\\\\.com/[^\\\\s]+', 'https?://db\\\\.tt/[^\\\\s]+', 'https?://onedrive\\\\.live\\\\.com/[^\\\\s]+', 'https?://1drv\\\\.ms/[^\\\\s]+', 'https?://(?:www\\\\.)?mediafire\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?wetransfer\\\\.com/[^\\\\s]+', 'https?://we\\\\.tl/[^\\\\s]+', 'https?://(?:www\\\\.)?sendspace\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?4shared\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?zippyshare\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?uploadfiles\\\\.io/[^\\\\s]+', 'https?://(?:www\\\\.)?box\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?pcloud\\\\.com/[^\\\\s]+', 'https?://disk\\\\.yandex\\\\.[a-z]+/[^\\\\s]+', 'https?://[^\\\\s]*(?:file|upload|share|download|drive|storage)[^\\\\s]*\\\\.[a-z]{2,4}/[^\\\\s]+']               </code>"},{"location":"configuration/reference/#ktoolbox.configuration.LoggerConfiguration","title":"<code>LoggerConfiguration</code>","text":"<p>Logger configuration</p> <p>Attributes:</p> Name Type Description Default Value <code>path</code> <code>Optional[Path]</code> <p>Path to save logs, <code>None</code> for disable log file output</p> <code>                       None               </code> <code>level</code> <code>Union[str, int]</code> <p>Log filter level</p> <code>                       logging.getLevelName(logging.DEBUG)               </code> <code>rotation</code> <code>Union[str, int, time, timedelta]</code> <p>Log rotation</p> <code>                       '1 week'               </code>"},{"location":"zh/","title":"\u6b22\u8fce\u4f7f\u7528 KToolBox","text":"KToolBox  <p>   KToolBox \u662f\u4e00\u4e2a\u7528\u4e8e\u4e0b\u8f7d   Kemono.su / Kemono.party   \u4e2d\u4f5c\u54c1\u5185\u5bb9\u7684\u5b9e\u7528\u547d\u4ee4\u884c\u5de5\u5177 </p> <p> </p>"},{"location":"zh/#_1","title":"\u529f\u80fd","text":"<ul> <li>\u652f\u6301\u5e76\u53d1\u4e0b\u8f7d</li> <li>API \u8c03\u7528\u548c\u4e0b\u8f7d\u5931\u8d25\u540e \u81ea\u52a8\u91cd\u8bd5</li> <li>\u652f\u6301\u4e0b\u8f7d\u5355\u4e2a\u4f5c\u54c1\u4ee5\u53ca\u6307\u5b9a\u7684\u753b\u5e08\u7684 \u6240\u6709\u4f5c\u54c1</li> <li>\u53ef \u66f4\u65b0\u5df2\u4e0b\u8f7d \u7684\u753b\u5e08\u76ee\u5f55\u81f3\u6700\u65b0\u72b6\u6001</li> <li>\u652f\u6301\u81ea\u5b9a\u4e49\u4e0b\u8f7d\u7684\u4f5c\u54c1/\u753b\u5e08 \u6587\u4ef6\u548c\u76ee\u5f55\u540d\u683c\u5f0f\u3001\u76ee\u5f55\u7ed3\u6784</li> <li>\u652f\u6301\u6392\u9664 \u6307\u5b9a\u683c\u5f0f \u7684\u6587\u4ef6\u6216\u4ec5\u4e0b\u8f7d\u6307\u5b9a\u683c\u5f0f\u7684\u6587\u4ef6</li> <li>\u53ef\u641c\u7d22\u753b\u5e08\u548c\u4f5c\u54c1\uff0c\u5e76\u5bfc\u51fa\u7ed3\u679c</li> <li>\u652f\u6301\u5168\u5e73\u53f0\uff0c\u5e76\u63d0\u4f9b iOS \u5feb\u6377\u6307\u4ee4</li> <li>\u5bf9\u4e8e Coomer.su / Coomer.party \u7684\u652f\u6301\uff0c\u8bf7\u67e5\u770b\u6587\u6863 Coomer</li> </ul>"},{"location":"zh/#_2","title":"\u4f7f\u7528\u65b9\u6cd5","text":""},{"location":"zh/#_3","title":"\u5b89\u88c5","text":"<p>\u4f60\u53ef\u4ee5\u4ece releases \u9875\u9762\u4e0b\u8f7d\u53ef\u6267\u884c\u6587\u4ef6\u4f7f\u7528</p> \u4e00\u822c\u60c5\u51b5 <p>\u63a8\u8350\u4f7f\u7528 pipx    <pre><code>pip3 install pipx\n# Windows\npipx install ktoolbox[urwid,winloop]\n# Linux / macOS\npipx install ktoolbox[urwid,uvloop]\n</code></pre></p> \u7eaf Python <p>\u5982\u679c\u4f60\u5728\u4f7f\u7528 pyodide\uff0c\u6216\u8005\u5982\u679c\u4f60\u53ea\u80fd\u4f7f\u7528\u7eafPython\uff0c\u65e0\u6cd5\u7f16\u8bd1 pydantic v2.x.x    <pre><code>pip3 install pipx\npipx install ktoolbox\n</code></pre></p> \u5bf9\u4e8e iOS a-Shell <pre><code>pip3 install ktoolbox-pure-py\n</code></pre> <p>\u5173\u4e8e a-Shell</p> <p>a-Shell \u662f\u4e00\u4e2a iOS \u7ec8\u7aef App\uff0c\u5b83\u53ea\u80fd\u8fd0\u884c\u7eaf Python \u811a\u672c</p>"},{"location":"zh/#_4","title":"\u547d\u4ee4","text":"<p>\u4f7f\u7528\u5e2e\u52a9\u547d\u4ee4\u6216\u524d\u5f80 \u547d\u4ee4 \u9875\u9762\u67e5\u770b\u66f4\u591a\u5e2e\u52a9\u3002</p>"},{"location":"zh/#_5","title":"\u2753 \u83b7\u53d6\u5e2e\u52a9\u603b\u89c8","text":"<pre><code>ktoolbox -h\n</code></pre>"},{"location":"zh/#_6","title":"\u2753 \u83b7\u53d6\u67d0\u4e2a\u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f","text":"<pre><code>ktoolbox download-post -h\n</code></pre>"},{"location":"zh/#_7","title":"\u2b07\ufe0f\ud83d\uddbc\ufe0f \u4e0b\u8f7d\u6307\u5b9a\u7684\u4f5c\u54c1","text":"<pre><code>ktoolbox download-post https://kemono.su/fanbox/user/49494721/post/6608808\n</code></pre> \u5982\u679c\u90e8\u5206\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25 <p>\u5982\u679c\u90e8\u5206\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u91cd\u65b0\u8fd0\u884c\u547d\u4ee4\uff0c\u5df2\u4e0b\u8f7d\u5b8c\u6210\u7684\u6587\u4ef6\u4f1a\u88ab \u8df3\u8fc7\u3002</p>"},{"location":"zh/#_8","title":"\u2b07\ufe0f\ud83d\udd8c\ufe0f \u4e0b\u8f7d\u4f5c\u8005\u7684\u6240\u6709\u4f5c\u54c1","text":"<pre><code># \u4e0b\u8f7d\u4f5c\u8005/\u753b\u5e08\u7684\u6240\u6709\u4f5c\u54c1\nktoolbox sync-creator https://kemono.su/fanbox/user/9016\n\n# \u4e0b\u8f7d\u4f5c\u8005/\u753b\u5e08\u6700\u65b0\u7684 10 \u4e2a\u4f5c\u54c1\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --length=10\n\n# \u4e0b\u8f7d\u4f5c\u8005/\u753b\u5e08\u6700\u65b0\u7684\u7b2c 11 \u81f3 15 \u4e2a\u4f5c\u54c1\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --offset=10 --length=5\n\n# \u4e0b\u8f7d\u4f5c\u8005/\u753b\u5e08\u4ece 2024-1-1 \u5230 2024-3-1 \u7684\u4f5c\u54c1\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --start-time=2024-1-1 --end-time=2024-3-1\n</code></pre>"},{"location":"zh/#_9","title":"\u914d\u7f6e","text":"<ul> <li>\u540c\u65f6\u4e0b\u8f7d10\u4e2a\u6587\u4ef6</li> <li>\u6309\u7167\u6570\u5b57\u987a\u5e8f\u91cd\u547d\u540d\u9644\u4ef6, \u4f8b\u5982 <code>1.png</code>, <code>2.png</code>, ...</li> <li>\u5c06\u53d1\u5e03\u65e5\u671f\u4f5c\u4e3a\u4f5c\u54c1\u76ee\u5f55\u540d\u7684\u5f00\u5934\uff0c\u4f8b\u5982 <code>[2024-1-1]HelloWorld</code></li> <li>...</li> </ul> <p>\u524d\u5f80 \u914d\u7f6e-\u5411\u5bfc \u9875\u9762\u67e5\u770b\u66f4\u591a\u8be6\u60c5\u3002</p>"},{"location":"zh/about-kemono/","title":"\u5173\u4e8e Kemono","text":"<p>\u5b98\u7f51 https://kemono.cr \u7684\u4ecb\u7ecd\uff1a</p> <p>Kemono is a public archiver for:</p> <ul> <li>Patreon</li> <li>Pixiv Fanbox</li> <li>Discord</li> <li>Fantia</li> <li>Afdian</li> <li>Boosty</li> <li>DLsite</li> <li>Gumroad</li> <li>SubscribeStar</li> </ul> <p>Contributors here upload content and share it here for easy searching and organization. \\ To get started viewing content, either search for creators on the artists page, or search for content on the posts page.</p>"},{"location":"zh/api/","title":"API \u6587\u6863","text":""},{"location":"zh/coomer/","title":"Coomer","text":"<p>KToolBox \u652f\u6301\u4ece Coomer.st / Coomer.su / Coomer.party \u4e0b\u8f7d</p> <p>\u4f60\u9700\u8981\u901a\u8fc7 dotenv\u6587\u4ef6 <code>.env</code> \u6216 <code>prod.env</code> \u6216\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u6765\u4fee\u6539\u914d\u7f6e\uff1a <pre><code># Coomer API\nKTOOLBOX_API__NETLOC=coomer.st\n\n# \u7528\u4e8e\u4ece Coomer \u670d\u52a1\u5668\u4e0b\u8f7d\u6587\u4ef6\nKTOOLBOX_API__FILES_NETLOC=coomer.st\n</code></pre></p>"},{"location":"zh/coomer/#coomer_1","title":"\u5173\u4e8e Coomer","text":"<p>\u5b98\u7f51 https://coomer.st \u7684\u4ecb\u7ecd\uff1a</p> <p>Coomer is a public archiver for:</p> <ul> <li>OnlyFans</li> <li>Fansly</li> </ul> <p>Contributors here upload content and share it here for easy searching and organization. To get started viewing content, either search for creators on the creators page, or search for content on the posts page. If you want to contribute content, head over to the import page.</p>"},{"location":"zh/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"zh/faq/#uvloopwinloop","title":"\u5982\u4f55\u89e3\u51b3 uvloop/winloop \u5b89\u88c5\u5931\u8d25\u7684\u95ee\u9898\uff1f","text":"<p>\u8fd9\u662f\u53ef\u9009\u7684</p> <p>\u4e8b\u4ef6\u5faa\u73af\u4f18\u5316\uff08uvloop/winloop\uff09\u53ef\u4ee5\u63d0\u9ad8\u5e76\u53d1\u6027\u80fd\uff0c\u4f46\u5b83\u662f \u53ef\u9009\u7684\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u5b89\u88c5\u8fd9\u4e9b\u5305\uff0c\u4f60\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e2a\u6b65\u9aa4\u3002</p> <p>KToolBox \u73b0\u5728\u652f\u6301\u5e73\u53f0\u7279\u5b9a\u7684\u4e8b\u4ef6\u5faa\u73af\u4f18\u5316\uff1a</p> <ul> <li>Windows: \u4f7f\u7528 <code>winloop</code> \u6765\u63d0\u5347\u6027\u80fd</li> <li>Linux/macOS: \u4f7f\u7528 <code>uvloop</code> \u6765\u63d0\u5347\u6027\u80fd</li> </ul>"},{"location":"zh/faq/#_2","title":"\u5b89\u88c5\u4e8b\u4ef6\u5faa\u73af\u4f18\u5316","text":"WindowsLinux/macOS <pre><code>pip install ktoolbox[winloop]\n</code></pre> <pre><code>pip install ktoolbox[uvloop]\n</code></pre> <p>\u5982\u679c\u4f60\u5728 Linux \u6216 macOS \u5b89\u88c5 uvloop \u5931\u8d25\uff0c  \u4f60\u53ef\u4ee5\u5c1d\u8bd5\u7528\u4f8b\u5982 apt\u3001yum\u3001brew \u7684\u7cfb\u7edf\u5305\u7ba1\u7406\u5668\u5b89\u88c5\uff0c\u5305\u7ba1\u7406\u5668\u63d0\u4f9b\u6784\u5efa\u597d\u7684 uvloop \u5305\u3002</p> <ul> <li>\u4f7f\u7528 apt \u5b89\u88c5     <pre><code>sudo apt install python3-uvloop\n</code></pre></li> </ul>"},{"location":"zh/faq/#attachments","title":"\u6211\u4e0d\u9700\u8981\u4f5c\u54c1\u76ee\u5f55\u4e0b\u7684 <code>attachments</code> \u6587\u4ef6\u5939","text":"<p>\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u914d\u7f6e\u9009\u9879 <code>job.post_structure.attachments</code> \u4e3a <code>./</code></p> <p>\u901a\u8fc7 dotenv \u6587\u4ef6 <code>prod.env</code> \u6216\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u6765\u8bbe\u7f6e\u914d\u7f6e\uff1a <pre><code>KTOOLBOX_JOB__POST_STRUCTURE__ATTACHMENTS=./\n</code></pre></p> <p><code>./</code> \u8868\u793a\u9644\u4ef6\u6587\u4ef6\u5c06\u4f1a\u76f4\u63a5\u4e0b\u8f7d\u5230\u4f5c\u54c1\u76ee\u5f55\u4e0b\u3002</p> <p>\u63d0\u793a</p> <p>\u66f4\u591a\u8be6\u60c5\uff0c\u8bf7\u53c2\u8003 \u914d\u7f6e-\u5411\u5bfc \u9875\u9762\u3002</p>"},{"location":"zh/faq/#-_","title":"\u547d\u4ee4\u548c\u6807\u5fd7\uff08\u9009\u9879\uff09\u5e94\u5f53\u4f7f\u7528 <code>-</code> \u8fd8\u662f <code>_</code> \u4f5c\u4e3a\u5206\u9694\u7b26\uff1f","text":"<p>\u4e24\u8005\u90fd\u652f\u6301\uff0c\u63a8\u8350\u4f7f\u7528 <code>-</code>\u3002</p>"},{"location":"zh/faq/#_3","title":"\u6587\u4ef6\u540d\u8fc7\u957f","text":"<p>\u5728\u4e00\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u540d\u6216\u4f5c\u54c1\u76ee\u5f55\u540d\u8fc7\u957f\u800c\u5bfc\u81f4\u4e0b\u8f7d\u5931\u8d25\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f60\u53ef\u4ee5\u8bbe\u7f6e \u5e8f\u5217\u5316\u6587\u4ef6\u540d \u6216\u4f7f\u7528 \u81ea\u5b9a\u4e49\u4f5c\u54c1\u76ee\u5f55\u540d</p> <p>\u901a\u8fc7 dotenv \u6587\u4ef6 <code>prod.env</code> \u6216\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u6765\u8bbe\u7f6e\u914d\u7f6e\uff1a <pre><code># \u6309\u7167\u6570\u5b57\u987a\u5e8f\u91cd\u547d\u540d\u9644\u4ef6, \u4f8b\u5982 `1.png`, `2.png`, ...\nKTOOLBOX_JOB__SEQUENTIAL_FILENAME=True\n\n# \u8bbe\u7f6e\u4f5c\u54c1\u76ee\u5f55\u540d\u4e3a\u5176\u53d1\u5e03\u65e5\u671f\u548cID\uff0c\u4f8b\u5982 `[2024-1-1]11223344`\nKTOOLBOX_JOB__POST_DIRNAME_FORMAT=[{published}]{id}\n</code></pre></p>"},{"location":"zh/faq/#_4","title":"\u5982\u4f55\u914d\u7f6e\u4ee3\u7406\uff1f","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e <code>HTTPS_PROXY</code>, <code>HTTP_PROXY</code>, <code>ALL_PROXY</code> \u73af\u5883\u53d8\u91cf\u5b9e\u73b0</p> <p>\u53c2\u8003\uff1aHTTPX - Environment Variables</p> <p>\u4f8b\u5982\u8fd9\u6837\u8bbe\u7f6e\uff1a</p> <pre><code># Unix Shell\nexport HTTPS_PROXY=http://127.0.0.1:7897\nexport HTTP_PROXY=http://127.0.0.1:7897\nexport ALL_PROXY=socks5://127.0.0.1:7897\n</code></pre> <pre><code># Windows PowerShell\n$env:HTTP_PROXY=\"http://127.0.0.1:7897\"; $env:HTTPS_PROXY=\"http://127.0.0.1:7897\"\n</code></pre>"},{"location":"zh/faq/#_5","title":"\u56fe\u5f62\u5316\u914d\u7f6e\u7f16\u8f91\u5668\u65e0\u6cd5\u6253\u5f00","text":"<p>\u6ce8\u610f</p> <p><code>ktoolbox-pure-py</code> \u4e0d\u652f\u6301\u56fe\u5f62\u5316\u914d\u7f6e\u7f16\u8f91\u5668</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u56fe\u5f62\u5316\u914d\u7f6e\u7f16\u8f91\u5668\u7684\u76f8\u5173\u4f9d\u8d56\u4e0d\u4f1a\u88ab\u5b89\u88c5\uff0c\u53ef\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u9644\u5e26\u5b89\u88c5\uff1a</p> <pre><code>pip3 install ktoolbox[urwid]\n</code></pre> <p>\u5982\u679c\u4f60\u7528\u7684\u662f pipx\uff1a</p> <pre><code>pipx install ktoolbox[urwid] --force\n</code></pre>"},{"location":"zh/faq/#kemono-api","title":"Kemono API \u8c03\u7528\u5931\u8d25","text":"<p>\u4f8b\u5982\uff1a</p> <pre><code>ktoolbox sync-creator \"https://coomer.su/onlyfans/user/hollyharper11\" --start-time=\"2020-05-01\" --end-time=\"2025-01-01\"\n\n2024-05-12 12:52:51.477 | INFO     | ktoolbox.cli:sync_creator:271 - Got creator information - {'name': 'hollyharper11', 'id': 'hollyharper11'}\n2024-05-12 12:52:51.479 | INFO     | ktoolbox.action.job:create_job_from_creator:148 - Start fetching posts from creator hollyharper11\n2024-05-12 12:52:56.477 | ERROR    | ktoolbox.api.base:_retry_error_callback:37 - Kemono API call failed - {'ret': APIRet(code=1002, message=\"1 validation error for Response\\n  Invalid JSON: expected value at line 1 column 1 [type=json_invalid, input_value='&lt;!DOCTYPE html&gt;\\\\n&lt;html&gt;\\\\...&gt;\\\\n  &lt;/body&gt;\\\\n&lt;/html&gt;\\\\n', input_type=str]\\n    For further information visit https://errors.pydantic.dev/2.7/v/json_invalid\", exception=1 validation error for Response\n  Invalid JSON: expected value at line 1 column 1 [type=json_invalid, input_value='&lt;!DOCTYPE html&gt;\\n&lt;html&gt;\\...&gt;\\n  &lt;/body&gt;\\n&lt;/html&gt;\\n', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/json_invalid, data=None)}\n1 validation error for Response\n  Invalid JSON: expected value at line 1 column 1 [type=json_invalid, input_value='&lt;!DOCTYPE html&gt;\\n&lt;html&gt;\\...&gt;\\n  &lt;/body&gt;\\n&lt;/html&gt;\\n', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/json_invalid\n</code></pre> <ol> <li> <p>\u786e\u4fdd\u66f4\u65b0\u5230\u4e86 v0.14.0 \u6216\u4ee5\u4e0a\u7248\u672c</p> </li> <li> <p>\u4e00\u822c\u53ef\u80fd\u662f\u56e0\u4e3a\u8bf7\u6c42\u9891\u7e41\u5bfc\u81f4\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u8bbe\u7f6e\u66f4\u591a\u7684 API \u91cd\u8bd5\u6b21\u6570     <pre><code># .env / prod.env\nKTOOLBOX_API__RETRY_TIMES=10\n</code></pre></p> </li> <li> <p>\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u8bbe\u7f6e\u4e0b\u8f7d\u6240\u7528\u7684 session key \uff08\u767b\u5f55\u6210\u529f\u540e\u53ef\u5728 Cookies \u4e2d\u67e5\u770b\uff09     <pre><code># .env / prod.env\nKTOOLBOX_API__SESSION_KEY=\"xxxxxxx\"\n</code></pre></p> </li> </ol> <p>\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u56fe\u5f62\u5316\u914d\u7f6e\u7f16\u8f91\u5668\u8bbe\u7f6e\uff1a<code>API - retry_times</code> \u548c <code>API -&gt; session_key</code>.</p>"},{"location":"zh/faq/#403","title":"\u4e0b\u8f7d\u65f6\u9891\u7e41\u51fa\u73b0 403 \u9519\u8bef","text":"<p>\u89e3\u51b3\u65b9\u6cd5\u540c\u4e0a</p>"},{"location":"zh/faq/#_6","title":"\u5176\u4ed6","text":"<p>\u4e00\u4e2a\u793e\u533a\u5206\u4eab\u7684\u4f7f\u7528\u5411\u5bfc\uff1a#141</p>"},{"location":"zh/more/","title":"\u66f4\u591a","text":""},{"location":"zh/more/#_2","title":"\u5176\u4ed6\u5206\u652f","text":"<ul> <li>\u7eaf Python \u5206\u652f\uff1a\ud83d\udd17pure-py</li> </ul> <p>\u5173\u4e8e</p> <ul> <li>\u4f7f\u7528 pydantic v1 \u56e0\u6b64\u5b89\u88c5\u65f6\u4e0d\u9700\u8981 cargo</li> <li>\u4f8b\u5982\u4f60\u53ef\u4ee5\u5728 iOS \u7684\u7ec8\u7aef App a-Shell \u8fd0\u884c</li> <li>\ud83d\udd17PyPI</li> </ul> <ul> <li>\u5f00\u53d1\u7248\u5206\u652f\uff1a\ud83d\udd17devel</li> </ul>"},{"location":"zh/more/#_3","title":"\u4ee3\u7801\u8986\u76d6\u7387","text":""},{"location":"zh/more/#_4","title":"\u8bb8\u53ef\u8bc1","text":"<p>KToolBox \u4f7f\u7528 BSD 3-Clause \u8bb8\u53ef\u8bc1.</p> <p>Copyright \u00a9 2023 by Ljzd-PRO.</p>"},{"location":"zh/shortcut/","title":"iOS \u5feb\u6377\u6307\u4ee4","text":"<p>\u4f60\u53ef\u4ee5\u5728 iOS \u7ec8\u7aef App a-Shell \u8fd0\u884c KToolBox\uff0c\u4e0b\u5217\u5feb\u6377\u6307\u4ee4\u53ef\u4ee5\u5e2e\u52a9\u4f60\u81ea\u52a8\u5b8c\u6210 KToolBox \u7684\u5b89\u88c5\u4ee5\u53ca\u4f5c\u54c1\u4e0b\u8f7d</p>"},{"location":"zh/shortcut/#_1","title":"\u83b7\u53d6\u5feb\u6377\u6307\u4ee4","text":"<p>\u8bbf\u95ee\u4e0b\u9762\u7684\u5feb\u6377\u6307\u4ee4 URL \u6216\u524d\u5f80 <code>shortcuts/</code> \u4e0b\u8f7d\u5feb\u6377\u6307\u4ee4\u6587\u4ef6</p>"},{"location":"zh/shortcut/#_2","title":"\u82f1\u6587","text":"<ul> <li>KToolBox Manager</li> <li>Download Kemono Post</li> </ul>"},{"location":"zh/shortcut/#_3","title":"\u4e2d\u6587","text":"<ul> <li>KToolBox \u7ba1\u7406\u5668</li> <li>\u4e0b\u8f7d Kemono \u4f5c\u54c1</li> </ul>"},{"location":"zh/shortcut/#_4","title":"\u7528\u6cd5","text":"<ul> <li>\u4f7f\u7528 \u201cKToolBox \u7ba1\u7406\u5668\u201d \u4ee5\u5728 a-Shell \u4e2d \u5b89\u88c5\u3001\u66f4\u65b0\u3001\u5378\u8f7d KToolBox</li> <li>\u4f60\u53ef\u4ee5\u901a\u8fc7\u7f51\u9875\u5171\u4eab\u754c\u9762\u89e6\u53d1\u201c\u4e0b\u8f7d Kemono \u4f5c\u54c1\u201d\uff0c\u6216\u76f4\u63a5\u5728\u5feb\u6377\u6307\u4ee4 App \u8fd0\u884c</li> </ul>"},{"location":"zh/commands/guide/","title":"\u5411\u5bfc","text":"<p>\u524d\u5f80 \u53c2\u8003 \u6240\u6709\u547d\u4ee4\u4ee5\u53ca\u5b83\u4eec\u7684\u6807\u5fd7/\u53c2\u6570.</p>"},{"location":"zh/commands/guide/#_2","title":"\u83b7\u53d6\u5e2e\u52a9\u603b\u89c8","text":"<ul> <li><code>--help</code>, <code>-h</code></li> </ul> <pre><code>ktoolbox -h\n</code></pre>"},{"location":"zh/commands/guide/#_3","title":"\u83b7\u53d6\u67d0\u4e2a\u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f","text":"<ul> <li><code>--help</code>, <code>-h</code></li> </ul> <pre><code>ktoolbox download-post -h\n</code></pre>"},{"location":"zh/commands/guide/#_4","title":"\u542f\u52a8\u56fe\u5f62\u5316\u914d\u7f6e\u7f16\u8f91\u5668","text":"<p><code>config-editor</code></p> <pre><code>ktoolbox config-editor\n</code></pre>"},{"location":"zh/commands/guide/#envprodenv","title":"\u751f\u6210\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u6837\u4f8b (<code>.env</code>/<code>prod.env</code>)","text":"<p><code>example-env</code></p> <pre><code>ktoolbox example-env\n</code></pre>"},{"location":"zh/commands/guide/#_5","title":"\u4e0b\u8f7d\u6307\u5b9a\u7684\u4f5c\u54c1","text":"<p><code>download-post</code></p> <pre><code>ktoolbox download-post https://kemono.su/fanbox/user/49494721/post/6608808\n</code></pre> \u5982\u679c\u90e8\u5206\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25 <p>\u5982\u679c\u90e8\u5206\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u91cd\u65b0\u8fd0\u884c\u547d\u4ee4\uff0c\u5df2\u4e0b\u8f7d\u5b8c\u6210\u7684\u6587\u4ef6\u4f1a\u88ab \u8df3\u8fc7\u3002</p>"},{"location":"zh/commands/guide/#_6","title":"\u4e0b\u8f7d\u4f5c\u8005\u7684\u6240\u6709\u4f5c\u54c1","text":"<p><code>sync-creator</code></p> <pre><code># \u4e0b\u8f7d\u4f5c\u8005/\u753b\u5e08\u7684\u6240\u6709\u4f5c\u54c1\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --offset=10 --length=5\n</code></pre> \u5173\u4e8e <code>creator-indices.ktoolbox</code> \u6587\u4ef6 <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f60\u4f1a\u5728\u4f5c\u8005\u76ee\u5f55\u4e0b\u5f97\u5230\u4e00\u4e2a <code>creator-indices.ktoolbox</code> \u6587\u4ef6\uff0c\u5b83\u5305\u542b\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u4f5c\u54c1\u7684\u4fe1\u606f\u548c\u8def\u5f84\u3002</p> \u66f4\u65b0\u4f5c\u8005\u76ee\u5f55 <p>\u4f60\u53ef\u4ee5\u518d\u6b21\u8fd0\u884c\u547d\u4ee4\uff0c\u6587\u4ef6\u540d\u76f8\u540c\u7684\u6587\u4ef6\u5c06\u4f1a\u88ab\u8df3\u8fc7\u3002</p>"},{"location":"zh/commands/guide/#_7","title":"\u4e0b\u8f7d\u6307\u5b9a\u6570\u91cf\u7684\u4f5c\u54c1","text":"<p><code>sync-creator</code></p> <ul> <li><code>--offset</code>\uff1a\u4f5c\u54c1\u7ed3\u679c\u504f\u79fb\u91cf\uff08\u6216\u8d77\u59cb\u504f\u79fb\u91cf\uff09</li> <li><code>--length</code>\uff1a\u8981\u83b7\u53d6\u7684\u4f5c\u54c1\u6570\u91cf\uff0c\u9ed8\u8ba4\u83b7\u53d6\u6240\u6709\u4f5c\u54c1</li> </ul> <pre><code># \u4e0b\u8f7d\u4f5c\u8005/\u753b\u5e08\u6700\u65b0\u7684 10 \u4e2a\u4f5c\u54c1\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --length=10\n\n# \u4e0b\u8f7d\u4f5c\u8005/\u753b\u5e08\u6700\u65b0\u7684\u7b2c 11 \u81f3 15 \u4e2a\u4f5c\u54c1\nktoolbox sync-creator https://kemono.su/fanbox/user/9016 --offset=10 --length=5\n</code></pre>"},{"location":"zh/commands/guide/#_8","title":"\u4e0b\u8f7d\u5728\u6307\u5b9a\u65f6\u95f4\u8303\u56f4\u5185\u53d1\u5e03\u7684\u4f5c\u54c1","text":"<p><code>sync-creator</code></p> <ul> <li><code>--start-time</code>\uff1a\u4e0b\u8f7d\u6307\u5b9a\u5f00\u59cb\u65f6\u95f4\u8303\u56f4\u5185\u7684\u4f5c\u54c1</li> <li><code>--end-time</code>\uff1a\u4e0b\u8f7d\u6307\u5b9a\u7ed3\u675f\u65f6\u95f4\u8303\u56f4\u5185\u7684\u4f5c\u54c1</li> </ul> <pre><code># \u4ece 2023-8-5 \u5230 2023-12-6\nktoolbox sync-creator https://kemono.su/fanbox/user/641955 --start-time=2023-8-5 --end-time=2023-12-6\n\n# \u4ece 2023-8-5 \u5230 \u73b0\u5728\nktoolbox sync-creator https://kemono.su/fanbox/user/641955 --start-time=2023-8-5\n\n# 2023-8-5 \u4e4b\u524d\nktoolbox sync-creator https://kemono.su/fanbox/user/641955 --end-time=2023-8-5\n</code></pre>"},{"location":"zh/commands/guide/#_9","title":"\u65f6\u95f4\u683c\u5f0f","text":"<p>\u65f6\u95f4\u503c\u5e94\u5f53\u7b26\u5408 <code>%Y-%m-%d</code> \u683c\u5f0f\uff0c\u4f8b\u5982\uff1a</p> <ul> <li><code>2023-12-7</code></li> <li><code>2023-12-07</code></li> <li><code>2023-12-31</code></li> </ul>"},{"location":"zh/commands/reference/","title":"\u53c2\u8003","text":""},{"location":"zh/commands/reference/#ktoolbox.cli.KToolBoxCli.config_editor","title":"<code>config_editor</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Launch graphical KToolBox configuration editor</p>"},{"location":"zh/commands/reference/#ktoolbox.cli.KToolBoxCli.download_post","title":"<code>download_post</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Download a specific post or revision</p> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>The post URL</p> <code>None</code> <code>service</code> <code>str</code> <p>The service name</p> <code>None</code> <code>creator_id</code> <code>str</code> <p>The creator's ID</p> <code>None</code> <code>post_id</code> <code>str</code> <p>The post ID</p> <code>None</code> <code>revision_id</code> <code>str</code> <p>The revision ID (optional, for revision posts)</p> <code>None</code> <code>path</code> <code>Union[Path, str]</code> <p>Download path, default is current directory</p> <code>Path('.')</code> <code>dump_post_data</code> <p>Whether to dump post data (post.json) in post directory</p> <code>True</code>"},{"location":"zh/commands/reference/#ktoolbox.cli.KToolBoxCli.example_env","title":"<code>example_env</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Generate an example configuration <code>.env</code> file.</p>"},{"location":"zh/commands/reference/#ktoolbox.cli.KToolBoxCli.get_post","title":"<code>get_post</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Get a specific post or revision</p> <p>Parameters:</p> Name Type Description Default <code>service</code> <code>str</code> <p>The service name</p> required <code>creator_id</code> <code>str</code> <p>The creator's ID</p> required <code>post_id</code> <code>str</code> <p>The post ID</p> required <code>revision_id</code> <code>str</code> <p>The revision ID (optional, for revision posts)</p> <code>None</code> <code>dump</code> <code>Path</code> <p>Dump the result to a JSON file</p> <code>None</code>"},{"location":"zh/commands/reference/#ktoolbox.cli.KToolBoxCli.search_creator","title":"<code>search_creator</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Search creator, you can use multiple parameters as keywords.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code> <code>dump</code> <code>Path</code> <p>Dump the result to a JSON file</p> <code>None</code>"},{"location":"zh/commands/reference/#ktoolbox.cli.KToolBoxCli.search_creator_post","title":"<code>search_creator_post</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Search posts from creator, you can use multiple parameters as keywords.</p> <p>Parameters:</p> Name Type Description Default <code>id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>name</code> <code>str</code> <p>The name of the creator</p> <code>None</code> <code>service</code> <code>str</code> <p>The service for the creator</p> <code>None</code> <code>q</code> <code>str</code> <p>Search query</p> <code>None</code> <code>o</code> <code>int</code> <p>Result offset, stepping of 50 is enforced</p> <code>None</code> <code>dump</code> <code>Path</code> <p>Dump the result to a JSON file</p> <code>None</code>"},{"location":"zh/commands/reference/#ktoolbox.cli.KToolBoxCli.site_version","title":"<code>site_version</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Show current Kemono site app commit hash</p>"},{"location":"zh/commands/reference/#ktoolbox.cli.KToolBoxCli.sync_creator","title":"<code>sync_creator</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Sync posts from a creator</p> <p>You can update the directory anytime after download finished,         such as to update after creator published new posts.</p> <ul> <li><code>start_time</code> &amp; <code>end_time</code> example: <code>2023-12-7</code>, <code>2023-12-07</code></li> </ul> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>The post URL</p> <code>None</code> <code>service</code> <code>str</code> <p>The service where the post is located</p> <code>None</code> <code>creator_id</code> <code>str</code> <p>The ID of the creator</p> <code>None</code> <code>path</code> <code>Union[Path, str]</code> <p>Download path, default is current directory</p> <code>Path('.')</code> <code>save_creator_indices</code> <code>bool</code> <p>Record <code>CreatorIndices</code> data</p> <code>False</code> <code>mix_posts</code> <code>bool</code> <p>Save all_pages files from different posts at same path,             <code>save_creator_indices</code> will be ignored if enabled</p> <code>None</code> <code>start_time</code> <code>str</code> <p>Start time of the published time range for posts downloading.             Set to <code>0</code> if <code>None</code> was given.             Time format: <code>%Y-%m-%d</code></p> <code>None</code> <code>end_time</code> <code>str</code> <p>End time of the published time range for posts downloading.             Set to latest time (infinity) if <code>None</code> was given.             Time format: <code>%Y-%m-%d</code></p> <code>None</code> <code>offset</code> <code>int</code> <p>Result offset (or start offset)</p> <code>0</code> <code>length</code> <code>int</code> <p>The number of posts to fetch, defaults to fetching all posts after <code>offset</code>.</p> <code>None</code> <code>keywords</code> <code>str</code> <p>Comma-separated keywords to filter posts by title (case-insensitive)</p> <code>None</code>"},{"location":"zh/commands/reference/#ktoolbox.cli.KToolBoxCli.version","title":"<code>version</code>  <code>async</code> <code>staticmethod</code>","text":"<p>Show KToolBox version</p>"},{"location":"zh/configuration/guide/","title":"\u5411\u5bfc","text":"<p>\u56fe\u5f62\u5316\u914d\u7f6e\u7f16\u8f91\u5668</p> \u7528\u6cd5\u622a\u56fe <p>\u8fd0\u884c <code>ktoolbox config-editor</code> \u6765\u542f\u52a8\uff0c\u8fd9\u4f1a\u4f7f\u914d\u7f6e\u7f16\u8f91\u53d8\u5f97\u7b80\u5355\u65b9\u4fbf\u3002</p> <ul> <li>\u6309\u4e0b <code>&lt;Esc&gt;</code> \u6765\u8fd4\u56de\uff0c\u6309 <code>&lt;Enter&gt;</code> \u6765\u9009\u62e9 </li> <li>\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9f20\u6807\u4f7f\u7528\u8fd9\u4e2a GUI</li> </ul> <p> </p> <p>\u751f\u6210\u793a\u4f8b <code>.env</code> \u6587\u4ef6</p> <p>\u8fd0\u884c <code>ktoolbox example-env</code> \u6765\u751f\u6210\u5b8c\u6574\u7684\u914d\u7f6e\u6587\u4ef6\u6837\u4f8b\u3002</p> <ul> <li>KToolBox \u8bfb\u53d6 \u5de5\u4f5c\u76ee\u5f55 \u4e0b\u7684 <code>.env</code> \u6216 <code>prod.env</code> \u6587\u4ef6 \u6216 \u73af\u5883\u53d8\u91cf \u6765\u8bbe\u5b9a\u914d\u7f6e</li> <li>\u5de5\u4f5c\u76ee\u5f55\u6307\u7684\u662f\u4f60\u6267\u884c <code>ktoolbox</code> \u547d\u4ee4\u7684\u76ee\u5f55\u4f4d\u7f6e\uff0c\u4e0d\u4e00\u5b9a\u662f <code>ktoolbox</code> \u53ef\u6267\u884c\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u3002\u5728\u54ea\u91cc\u6267\u884c\u5c31\u5728\u54ea\u91cc\u8bfb\u53d6\u3002</li> <li>\u524d\u5f80 \u53c2\u8003 \u67e5\u770b\u6240\u6709\u914d\u7f6e\u9009\u9879</li> <li>\u7528 <code>__</code> \u6765\u6307\u5b9a\u5b50\u9009\u9879, \u4f8b\u5982 <code>KTOOLBOX_API__SCHEME</code> \u76f8\u5f53\u4e8e <code>api.scheme</code></li> <li>\u6240\u6709\u914d\u7f6e\u9009\u9879\u90fd\u662f\u53ef\u9009\u7684</li> </ul>"},{"location":"zh/configuration/guide/#env-prodenv","title":"<code>.env</code> / <code>prod.env</code> \u6587\u4ef6\u793a\u4f8b","text":"<pre><code>##############################################################################\n#  \u63a8\u8350\u4f7f\u7528\u56fe\u5f62\u5316\u914d\u7f6e\u7f16\u8f91\u5668\u8fdb\u884c\u7f16\u8f91\u3002                                         #\n#  \u8fd0\u884c `ktoolbox config-editor` \u542f\u52a8\u7f16\u8f91\u5668\u3002                                #\n##############################################################################\n\n# \uff08\u53ef\u9009\uff09\u4f1a\u8bdd\u5bc6\u94a5\uff0c\u53ef\u5728\u6210\u529f\u767b\u5f55\u540e\u7684 cookies \u4e2d\u627e\u5230\n# 403 \u9519\u8bef\u65f6\u4f7f\u7528\n#KTOOLBOX_API__SESSION_KEY=xxxxx\n\n# \u540c\u65f6\u4e0b\u8f7d 10 \u4e2a\u6587\u4ef6\u3002\nKTOOLBOX_JOB__COUNT=10\n\n# \u8bbe\u7f6e\u5e16\u5b50\u9644\u4ef6\u76ee\u5f55\u8def\u5f84\u4e3a `./`\uff0c\u8868\u793a\u5c06\u6240\u6709\u9644\u4ef6\u6587\u4ef6\u4fdd\u5b58\u5728\u5e16\u5b50\u76ee\u5f55\u4e0b\n# \u4e0d\u4f1a\u4e3a\u9644\u4ef6\u5355\u72ec\u521b\u5efa\u5b50\u76ee\u5f55\nKTOOLBOX_JOB__POST_STRUCTURE__ATTACHMENTS=./\n\n# \u9644\u4ef6\u6309\u6570\u5b57\u987a\u5e8f\u91cd\u547d\u540d\uff0c\u4f8b\u5982 `1.png`\u3001`2.png`\u3001\u2026\u2026\nKTOOLBOX_JOB__SEQUENTIAL_FILENAME=True\n\n# \u901a\u8fc7\u63d2\u5165\u7a7a\u7684 `{}` \u81ea\u5b9a\u4e49\u6587\u4ef6\u540d\u683c\u5f0f\uff0c\u8868\u793a\u57fa\u7840\u6587\u4ef6\u540d\u3002\n# \u7c7b\u4f3c\u4e8e `post_dirname_format`\uff0c\u53ef\u4ee5\u4f7f\u7528 `Post` \u4e2d\u7684\u4e00\u4e9b\u5c5e\u6027\u3002\n# \u4f8b\u5982\uff1a`{title}_{}` &gt; `HelloWorld_b4b41de2-8736-480d-b5c3-ebf0d917561b` \u7b49\u3002\n# \u4e5f\u53ef\u4ee5\u4e0e `sequential_filename` \u4e00\u8d77\u4f7f\u7528\u3002\u4f8b\u5982\uff0c\n# `[{published}]_{}` &gt; `[2024-1-1]_1.png`\u3001`[2024-1-1]_2.png` \u7b49\u3002\nKTOOLBOX_JOB__FILENAME_FORMAT=[{published}]_{title}_{id}_{}\n\n# \u5e16\u5b50\u76ee\u5f55\u540d\u4ee5\u53d1\u5e03\u65f6\u95f4\u4f5c\u4e3a\u524d\u7f00\uff0c\u4f8b\u5982 `[2024-1-1]HelloWorld`\nKTOOLBOX_JOB__POST_DIRNAME_FORMAT=[{published}]{title}\n</code></pre>"},{"location":"zh/configuration/reference/","title":"\u53c2\u8003","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.Configuration.api","title":"<code>api: APIConfiguration = APIConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.Configuration.downloader","title":"<code>downloader: DownloaderConfiguration = DownloaderConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.Configuration.job","title":"<code>job: JobConfiguration = JobConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.Configuration.logger","title":"<code>logger: LoggerConfiguration = LoggerConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.Configuration.ssl_verify","title":"<code>ssl_verify: bool = True</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.Configuration.json_dump_indent","title":"<code>json_dump_indent: int = 4</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.Configuration.use_uvloop","title":"<code>use_uvloop: bool = True</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.APIConfiguration.scheme","title":"<code>scheme: Literal['http', 'https'] = 'https'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.APIConfiguration.netloc","title":"<code>netloc: str = 'kemono.cr'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.APIConfiguration.statics_netloc","title":"<code>statics_netloc: str = 'img.kemono.cr'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.APIConfiguration.files_netloc","title":"<code>files_netloc: str = 'kemono.cr'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.APIConfiguration.path","title":"<code>path: str = '/api/v1'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.APIConfiguration.timeout","title":"<code>timeout: float = 5.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.APIConfiguration.retry_times","title":"<code>retry_times: int = 3</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.APIConfiguration.retry_interval","title":"<code>retry_interval: float = 2.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.APIConfiguration.session_key","title":"<code>session_key: str = ''</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.scheme","title":"<code>scheme: Literal['http', 'https'] = 'https'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.timeout","title":"<code>timeout: float = 30.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.encoding","title":"<code>encoding: str = 'utf-8'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.buffer_size","title":"<code>buffer_size: int = 20480</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.chunk_size","title":"<code>chunk_size: int = 1024</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.temp_suffix","title":"<code>temp_suffix: str = 'tmp'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.retry_times","title":"<code>retry_times: int = 10</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.retry_stop_never","title":"<code>retry_stop_never: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.retry_interval","title":"<code>retry_interval: float = 3.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.tps_limit","title":"<code>tps_limit: float = 1.0</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.use_bucket","title":"<code>use_bucket: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.bucket_path","title":"<code>bucket_path: Path = Path('./.ktoolbox/bucket_storage')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.reverse_proxy","title":"<code>reverse_proxy: str = '{}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.DownloaderConfiguration.check_bucket_path","title":"<code>check_bucket_path()</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.PostStructureConfiguration.attachments","title":"<code>attachments: Path = Path('attachments')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.PostStructureConfiguration.content","title":"<code>content: Path = Path('content.txt')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.PostStructureConfiguration.external_links","title":"<code>external_links: Path = Path('external_links.txt')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.PostStructureConfiguration.file","title":"<code>file: str = '{id}_{}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.PostStructureConfiguration.revisions","title":"<code>revisions: Path = Path('revisions')</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.count","title":"<code>count: int = 4</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.include_revisions","title":"<code>include_revisions: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.post_dirname_format","title":"<code>post_dirname_format: str = '{title}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.post_structure","title":"<code>post_structure: PostStructureConfiguration = PostStructureConfiguration()</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.mix_posts","title":"<code>mix_posts: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.sequential_filename","title":"<code>sequential_filename: bool = False</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.sequential_filename_excludes","title":"<code>sequential_filename_excludes: Set[str] = Field(default_factory=set)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.filename_format","title":"<code>filename_format: str = '{}'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.allow_list","title":"<code>allow_list: Set[str] = Field(default_factory=set)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.block_list","title":"<code>block_list: Set[str] = Field(default_factory=set)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.extract_external_links","title":"<code>extract_external_links: bool = True</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.JobConfiguration.external_link_patterns","title":"<code>external_link_patterns: List[str] = ['https?://drive\\\\.google\\\\.com/[^\\\\s]+', 'https?://docs\\\\.google\\\\.com/[^\\\\s]+', 'https?://mega\\\\.nz/[^\\\\s]+', 'https?://mega\\\\.co\\\\.nz/[^\\\\s]+', 'https?://(?:www\\\\.)?dropbox\\\\.com/[^\\\\s]+', 'https?://db\\\\.tt/[^\\\\s]+', 'https?://onedrive\\\\.live\\\\.com/[^\\\\s]+', 'https?://1drv\\\\.ms/[^\\\\s]+', 'https?://(?:www\\\\.)?mediafire\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?wetransfer\\\\.com/[^\\\\s]+', 'https?://we\\\\.tl/[^\\\\s]+', 'https?://(?:www\\\\.)?sendspace\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?4shared\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?zippyshare\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?uploadfiles\\\\.io/[^\\\\s]+', 'https?://(?:www\\\\.)?box\\\\.com/[^\\\\s]+', 'https?://(?:www\\\\.)?pcloud\\\\.com/[^\\\\s]+', 'https?://disk\\\\.yandex\\\\.[a-z]+/[^\\\\s]+', 'https?://[^\\\\s]*(?:file|upload|share|download|drive|storage)[^\\\\s]*\\\\.[a-z]{2,4}/[^\\\\s]+']</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.LoggerConfiguration.path","title":"<code>path: Optional[Path] = None</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.LoggerConfiguration.level","title":"<code>level: Union[str, int] = logging.getLevelName(logging.DEBUG)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"zh/configuration/reference/#ktoolbox.configuration.LoggerConfiguration.rotation","title":"<code>rotation: Union[str, int, datetime.time, datetime.timedelta] = '1 week'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""}]}